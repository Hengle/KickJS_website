<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns:yui="http://yuilibrary.com/rdf/1.0/yui.rdf#">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<title>API: KICK   math.js  (Kickstart Engine)</title>

	<link rel="stylesheet" type="text/css" href="assets/reset-fonts-grids-min.css" />
	<link rel="stylesheet" type="text/css" href="assets/api.css" />

    <!-- syntaxhighlighter_3.0.83 -->
    <script type="text/javascript" src="assets/syntaxhighlighter_3.0.83/shCore.js"></script>
    <script type="text/javascript" src="assets/syntaxhighlighter_3.0.83/shBrushJScript.js"></script>
    <link href="assets/syntaxhighlighter_3.0.83/shCore.css" rel="stylesheet" type="text/css" />
    <link href="assets/syntaxhighlighter_3.0.83/shThemeDefault.css" rel="stylesheet" type="text/css" />


    <script type="text/javascript" src="assets/api-js"></script>
    <script type="text/javascript" src="assets/ac-js"></script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-26354413-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</head>

<body id="yahoo-com">

<div id="doc3" class="yui-t2">
	<div id="hd">
        <h1><a href="http://www.kickjs.org/" title="KickJS">KickJS</a></h1>
        <h3>KICK&nbsp; <span class="subtitle">0.1.0</span></h3>
        <a href="./index.html" title="KickJS">KickJS</a> 
            &gt; <a href="./module_kick.html" title="KICK">KICK</a>
                
                 &gt; math.js (source view) 
        <form onsubmit="return false">
            <div id="propertysearch">
                Search: <input autocomplete="off" id="searchinput" />
                <div id="searchresults">
                    &nbsp;
                </div>
            </div>
        </form>
	</div>

	<div id="bd">
		<div id="yui-main">
			<div class="yui-b">
            <form action="#" name="yui-classopts-form" method="get" id="yui-classopts-form">
                <fieldset>
                    <legend>Filters</legend>
                <span class="classopts"><input type="checkbox" name="show_private" id="show_private" /> <label for="show_private">Show Private</label></span>
                <span class="classopts"><input type="checkbox" name="show_protected" id="show_protected" /> <label for="show_protected">Show Protected</label></span>
                <span class="classopts"><input type="checkbox" name="show_deprecated" id="show_deprecated" /> <label for="show_deprecated">Show Deprecated</label></span>
                </fieldset>
            </form>

                    <div id="srcout">
                        <style>
                            #doc3 .classopts { display:none; }
                        </style>
                        <div class="highlight"><pre><span class="cm">/*!</span>
<span class="cm"> * New BSD License</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2011, Morten Nobel-Joergensen, Kickstart Games ( http://www.kickstartgames.com/ )</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the</span>
<span class="cm"> * following conditions are met:</span>
<span class="cm"> *</span>
<span class="cm"> * - Redistributions of source code must retain the above copyright notice, this list of conditions and the following</span>
<span class="cm"> * disclaimer.</span>
<span class="cm"> * - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following</span>
<span class="cm"> * disclaimer in the documentation and/or other materials provided with the distribution.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,</span>
<span class="cm"> * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<span class="cm"> * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="cm"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
<span class="cm"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</span>
<span class="cm"> * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="cm"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> * This math library is a part of Kickstart Engine, but has no dependency to the rest of the project except for the</span>
<span class="cm"> * KICK.core.Constants (in constants.js)</span>
<span class="cm"> *</span>
<span class="cm"> * KICK.math is based on</span>
<span class="cm"> * glMatrix.js - version 0.9.6 - High performance matrix and vector operations for WebGL</span>
<span class="cm"> * But is extended in several ways</span>
<span class="cm"> *</span>
<span class="cm"> * glMatrix.js</span>
<span class="cm"> * Copyright (c) 2011 Brandon Jones</span>
<span class="cm"> *</span>
<span class="cm"> * This software is provided &#39;as-is&#39;, without any express or implied</span>
<span class="cm"> * warranty. In no event will the authors be held liable for any damages</span>
<span class="cm"> * arising from the use of this software.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission is granted to anyone to use this software for any purpose,</span>
<span class="cm"> * including commercial applications, and to alter it and redistribute it</span>
<span class="cm"> * freely, subject to the following restrictions:</span>
<span class="cm"> *</span>
<span class="cm"> *    1. The origin of this software must not be misrepresented; you must not</span>
<span class="cm"> *    claim that you wrote the original software. If you use this software</span>
<span class="cm"> *    in a product, an acknowledgment in the product documentation would be</span>
<span class="cm"> *    appreciated but is not required.</span>
<span class="cm"> *</span>
<span class="cm"> *    2. Altered source versions must be plainly marked as such, and must not</span>
<span class="cm"> *    be misrepresented as being the original software.</span>
<span class="cm"> *</span>
<span class="cm"> *    3. This notice may not be removed or altered from any source</span>
<span class="cm"> *    distribution.</span>
<span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">KICK</span> <span class="o">=</span> <span class="nx">KICK</span> <span class="o">||</span> <span class="p">{};</span>

<span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">||</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ns_string</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">ns_string</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">,</span>
        <span class="nx">i</span><span class="p">;</span>
    <span class="c1">// strip redundant leading global</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;KICK&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">parts</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// create property if it doesn&#39;t exist</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parent</span><span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="p">}</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">parent</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span> <span class="c1">// force strict ECMAScript 5</span>

    <span class="kd">var</span> <span class="nx">math</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math&quot;</span><span class="p">),</span>
        <span class="nx">vec2</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math.vec2&quot;</span><span class="p">),</span>
        <span class="nx">vec3</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math.vec3&quot;</span><span class="p">),</span>
        <span class="nx">vec4</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math.vec4&quot;</span><span class="p">),</span>
        <span class="nx">mat3</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math.mat3&quot;</span><span class="p">),</span>
        <span class="nx">mat4</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math.mat4&quot;</span><span class="p">),</span>
        <span class="nx">quat4</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s2">&quot;KICK.math.quat4&quot;</span><span class="p">),</span>
        <span class="nx">wrapArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">length</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
                <span class="nx">index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="nx">count</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="nx">length</span><span class="p">,</span>
                <span class="nx">res</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">count</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">,</span><span class="nx">index</span> <span class="o">+=</span> <span class="nx">length</span><span class="p">){</span>
                <span class="nx">res</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span><span class="nx">index</span><span class="o">+</span><span class="nx">length</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
        <span class="p">};</span>


    <span class="cm">/**</span>
<span class="cm">     * vec2 - 2 dimensional vector</span>
<span class="cm">     * @class vec2</span>
<span class="cm">     * @namespace KICK.math</span>
<span class="cm">     */</span>
    <span class="nx">math</span><span class="p">.</span><span class="nx">vec2</span> <span class="o">=</span> <span class="nx">vec2</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * See KICK.math.vec4.wrapArray</span>
<span class="cm">     * @method wrapArray</span>
<span class="cm">     * @param {Float32Array} array</span>
<span class="cm">     * @return {Array[KICK.math.vec2]} of vec2</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">wrapArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">wrapArray</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">};</span>


    <span class="cm">/**</span>
<span class="cm">     * Create a continuous array in memory mapped to vec2. &lt;br&gt;</span>
<span class="cm">     * @method array</span>
<span class="cm">     * @param {Number} count Number of vec 2 to be layed out in memory</span>
<span class="cm">     * @param {Object} ref Optional, if set a memory reference is set to ref.mem</span>
<span class="cm">     * @return {KICK.math.vec2} New vec2</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">array</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">count</span><span class="p">,</span><span class="nx">ref</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">memory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="nx">count</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ref</span><span class="p">){</span>
            <span class="nx">ref</span><span class="p">.</span><span class="nx">mem</span> <span class="o">=</span> <span class="nx">memory</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vec2</span><span class="p">.</span><span class="nx">wrapArray</span><span class="p">(</span><span class="nx">memory</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new instance of a vec2 using the default array type</span>
<span class="cm">     * Any javascript array containing at least 2 numeric elements can serve as a vec2</span>
<span class="cm">     * @method create</span>
<span class="cm">     * @param {Array[Number]} vec Optional, vec2 containing values to initialize with</span>
<span class="cm">     * @return {KICK.math.vec2} New vec2</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the values of one vec2 to another</span>
<span class="cm">     * @method set</span>
<span class="cm">     * @param {KICK.math.vec2} vec vec2 containing values to copy</span>
<span class="cm">     * @param {KICK.math.vec2} dest vec2 receiving copied values</span>
<span class="cm">     * @return {KICK.math.vec2} dest</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector addition</span>
<span class="cm">     * @method add</span>
<span class="cm">     * @param {KICK.math.vec2} vec  first operand</span>
<span class="cm">     * @param {KICK.math.vec2} vec2  second operand</span>
<span class="cm">     * @param {KICK.math.vec2} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec2} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector subtraction</span>
<span class="cm">     * @method subtract</span>
<span class="cm">     * @param {KICK.math.vec2} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec2} vec2 second operand</span>
<span class="cm">     * @param {KICK.math.vec2} dest Optional, vec2 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec2} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">subtract</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a unit vector of the same direction as the provided vec2</span>
<span class="cm">     * If vector length is 0, returns [0, 0]</span>
<span class="cm">     * @method normalize</span>
<span class="cm">     * @param {KICK.math.vec2} vec vec3 to normalize</span>
<span class="cm">     * @param {KICK.math.vec2} dest Optional, vec2 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec2} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec2</span><span class="p">.</span><span class="nx">normalize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">len</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="c1">// glMatrix start</span>

    <span class="cm">/**</span>
<span class="cm">     * vec3 - 3 Dimensional Vector</span>
<span class="cm">     * @class vec3</span>
<span class="cm">     * @namespace KICK.math</span>
<span class="cm">     */</span>
    <span class="nx">math</span><span class="p">.</span><span class="nx">vec3</span> <span class="o">=</span> <span class="nx">vec3</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * See KICK.math.vec4.wrapArray</span>
<span class="cm">     * @method wrapArray</span>
<span class="cm">     * @param {Float32Array} array</span>
<span class="cm">     * @return {Array[KICK.math.vec3]} of vec3</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">wrapArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">wrapArray</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Create a continuous array in memory mapped to vec3. &lt;br&gt;</span>
<span class="cm">     * &lt;br&gt;</span>
<span class="cm">     * Example&lt;br&gt;</span>
<span class="cm">     * &lt;pre class=&quot;brush: js&quot;&gt;</span>
<span class="cm">     * var ref = {};</span>
<span class="cm">     * var v = KICK.math.vec3.array(2,ref);</span>
<span class="cm">     * v[1][1] = 1;</span>
<span class="cm">     * ref.mem[4] == v[1][1];</span>
<span class="cm">     * &lt;/pre&gt;</span>
<span class="cm">     * Will be layed out like this: &lt;br&gt;</span>
<span class="cm">     * &lt;br&gt;</span>
<span class="cm">     * &lt;pre class=&quot;brush: js&quot;&gt;</span>
<span class="cm">     * [vec3][vec3) = [0][1][2][3][4][5]</span>
<span class="cm">     * &lt;/pre&gt;</span>
<span class="cm">     *</span>
<span class="cm">     * @method array</span>
<span class="cm">     * @param {Number} count Number of vec 3 to be layed out in memory</span>
<span class="cm">     * @param {Object} ref Optional, if set a memory reference is set to ref.mem</span>
<span class="cm">     * @return {KICK.math.vec3} New vec3</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">array</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">count</span><span class="p">,</span><span class="nx">ref</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">memory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="nx">count</span><span class="o">*</span><span class="mi">3</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ref</span><span class="p">){</span>
            <span class="nx">ref</span><span class="p">.</span><span class="nx">mem</span> <span class="o">=</span> <span class="nx">memory</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vec3</span><span class="p">.</span><span class="nx">wrapArray</span><span class="p">(</span><span class="nx">memory</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new instance of a vec3 using the default array type</span>
<span class="cm">     * Any javascript array containing at least 3 numeric elements can serve as a vec3</span>
<span class="cm">     * @method create</span>
<span class="cm">     * @param {Array[Number]} vec Optional, vec3 containing values to initialize with</span>
<span class="cm">     * @return {KICK.math.vec3} New vec3</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the values of one vec3 to another</span>
<span class="cm">     * @method set</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 containing values to copy</span>
<span class="cm">     * @param {KICK.math.vec3} dest vec3 receiving copied values</span>
<span class="cm">     * @return {KICK.math.vec3} dest</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector addition</span>
<span class="cm">     * @method add</span>
<span class="cm">     * @param {KICK.math.vec3} vec  first operand</span>
<span class="cm">     * @param {KICK.math.vec3} vec2  second operand</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector subtraction</span>
<span class="cm">     * @method subtract</span>
<span class="cm">     * @param {KICK.math.vec3} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec3} vec2 second operand</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">subtract</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector multiplication</span>
<span class="cm">     * @method multiply</span>
<span class="cm">     * @param {KICK.math.vec3} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec3} vec2 second operand</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Negates the components of a vec3</span>
<span class="cm">     * @method negate</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to negate</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">negate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Multiplies the components of a vec3 by a scalar value</span>
<span class="cm">     * @method scale</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to scale</span>
<span class="cm">     * @param {Number} val Numeric value to scale by</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a unit vector of the same direction as the provided vec3</span>
<span class="cm">     * If vector length is 0, returns [0, 0, 0]</span>
<span class="cm">     * @method normalize</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to normalize</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">normalize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z</span><span class="o">*</span><span class="nx">len</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates the cross product of two vec3s</span>
<span class="cm">     * @method cross</span>
<span class="cm">     * @param {KICK.math.vec3} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec3} vec2 second operand</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">cross</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z2</span> <span class="o">=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">z2</span> <span class="o">-</span> <span class="nx">z</span><span class="o">*</span><span class="nx">y2</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">x</span><span class="o">*</span><span class="nx">z2</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">y</span><span class="o">*</span><span class="nx">x2</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the length of a vec3</span>
<span class="cm">     * @method length</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to calculate length of</span>
<span class="cm">     * @return {Number} Length of vec</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the squared length of a vec3</span>
<span class="cm">     * @method lengthSqr</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to calculate squared length of</span>
<span class="cm">     * @return {Number} Squared length of vec</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">lengthSqr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the dot product of two vec3s</span>
<span class="cm">     * @method dot</span>
<span class="cm">     * @param {KICK.math.vec3} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec3} vec2 second operand</span>
<span class="cm">     * @return {Number} Dot product of vec and vec2</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">dot</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a unit vector pointing from one vector to another</span>
<span class="cm">     * @method direction</span>
<span class="cm">     * @param {KICK.math.vec3} vec origin vec3</span>
<span class="cm">     * @param {KICK.math.vec3} vec2 vec3 to point to</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">direction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a linear interpolation between two vec3</span>
<span class="cm">     * @method lerp</span>
<span class="cm">     * @param {KICK.math.vec3} vec first vector</span>
<span class="cm">     * @param {KICK.math.vec3} vec2 second vector</span>
<span class="cm">     * @param {Number} lerp interpolation amount between the two inputs</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">lerp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">lerp</span><span class="p">,</span> <span class="nx">dest</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lerp</span> <span class="o">*</span> <span class="p">(</span><span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lerp</span> <span class="o">*</span> <span class="p">(</span><span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">lerp</span> <span class="o">*</span> <span class="p">(</span><span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Converts the spherical coordinates (in radians) to carterian coordinates.&lt;br&gt;</span>
<span class="cm">     * Spherical coordinates are mapped so vec[0] is radius, vec[1] is polar and vec[2] is elevation</span>
<span class="cm">     * @method sphericalToCarterian</span>
<span class="cm">     * @param {KICK.math.vec3} spherical spherical coordinates</span>
<span class="cm">     * @param {KICK.math.vec3} cartesian optionally if not specified a new vec3 is returned</span>
<span class="cm">     * @return {KICK.math.vec3} position in cartesian angles</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">sphericalToCarterian</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">spherical</span><span class="p">,</span> <span class="nx">cartesian</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="nx">spherical</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">polar</span> <span class="o">=</span> <span class="o">-</span><span class="nx">spherical</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">elevation</span> <span class="o">=</span> <span class="nx">spherical</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">a</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">elevation</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cartesian</span><span class="p">){</span>
            <span class="nx">cartesian</span> <span class="o">=</span> <span class="nx">vec3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">cartesian</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">polar</span><span class="p">);</span>
        <span class="nx">cartesian</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">elevation</span><span class="p">);</span>
        <span class="nx">cartesian</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">polar</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">cartesian</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Converts from cartesian coordinates to spherical coordinates (in radians)&lt;br&gt;</span>
<span class="cm">     * Spherical coordinates are mapped so vec[0] is radius, vec[1] is polar and vec[2] is elevation</span>
<span class="cm">     * @method cartesianToSpherical</span>
<span class="cm">     * @param {KICK.math.vec3} cartesian</span>
<span class="cm">     * @param {KICK.math.vec3} spherical Optional</span>
<span class="cm">     * @return {KICK.math.vec3}</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">cartesianToSpherical</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cartesian</span><span class="p">,</span> <span class="nx">spherical</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">cartesian</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">y</span> <span class="o">=</span> <span class="nx">cartesian</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">z</span> <span class="o">=</span> <span class="nx">cartesian</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">sphericalX</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="nx">x</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">Constants</span><span class="p">.</span><span class="nx">_EPSILON</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">spherical</span><span class="p">){</span>
            <span class="nx">spherical</span> <span class="o">=</span> <span class="nx">vec3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nx">spherical</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sphericalX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="o">+</span><span class="nx">y</span><span class="o">*</span><span class="nx">y</span><span class="o">+</span><span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">);</span>
        <span class="nx">spherical</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nx">z</span><span class="o">/</span><span class="nx">x</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nx">spherical</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">spherical</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">sphericalX</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">spherical</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a vector</span>
<span class="cm">     * @method str</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to represent as a string</span>
<span class="cm">     * @return {String} string representation of vec</span>
<span class="cm">     */</span>
    <span class="nx">vec3</span><span class="p">.</span><span class="nx">str</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>


    <span class="c1">/////////////////////////////////////////</span>
    <span class="cm">/**</span>
<span class="cm">     * vec4 - 4 Dimensional Vector&lt;br&gt;</span>
<span class="cm">     * Note: To perform vec3 functions on vec4, simply call the vec3 functions&lt;br&gt;</span>
<span class="cm">     * @class vec4</span>
<span class="cm">     * @namespace KICK.math</span>
<span class="cm">     */</span>
    <span class="nx">math</span><span class="p">.</span><span class="nx">vec4</span> <span class="o">=</span> <span class="nx">vec4</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Wraps a Float32Array with multiple vec4 arrays. For instance if you have colors defined in a single</span>
<span class="cm">     * Float32Array, but need to do vector operations on the elements of the array, instead of copying data out of the</span>
<span class="cm">     * Float32Array, wrapArray will give you access to the same data.</span>
<span class="cm">     * &lt;br&gt;</span>
<span class="cm">     * Example:&lt;br&gt;</span>
<span class="cm">     * &lt;pre class=&quot;brush: js&quot;&gt;</span>
<span class="cm">     * function avarageColor(float32arrayColor){</span>
<span class="cm">     *     var sum = vec4.create(),</span>
<span class="cm">     *         wrappedArray = vec4.wrapArray(float32arrayColor),</span>
<span class="cm">     *         weigth = 1.0/wrappedArray;</span>
<span class="cm">     *     for (var i=0;i  &amp;lt; wrappedArray.length;i++){</span>
<span class="cm">     *         vec4.add(sum,wrappedArray[i]);</span>
<span class="cm">     *     }</span>
<span class="cm">     *     return vec4.multiply(sum,[weigth,weigth,weigth,weigth]);</span>
<span class="cm">     * }</span>
<span class="cm">     * &lt;/pre&gt;</span>
<span class="cm">     * @method wrapArray</span>
<span class="cm">     * @param {Float32Array} array</span>
<span class="cm">     * @return {Array[KICK.math.vec4]} </span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">wrapArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">wrapArray</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Create a continuous array in memory mapped to vec4.</span>
<span class="cm">     *</span>
<span class="cm">     * Example</span>
<span class="cm">     * &lt;pre class=&quot;brush: js&quot;&gt;</span>
<span class="cm">     * var ref = {};</span>
<span class="cm">     * var v = KICK.math.vec4.array(2,ref);</span>
<span class="cm">     * v[1][1] = 1;</span>
<span class="cm">     * ref.mem[5] == v[1][1];</span>
<span class="cm">     * &lt;/pre&gt;</span>
<span class="cm">     * Will be layed out like this:</span>
<span class="cm">     * &lt;pre class=&quot;brush: js&quot;&gt;</span>
<span class="cm">     * [vec4][vec4] = [0][1][2][3][4][5][6][7]</span>
<span class="cm">     * &lt;/pre&gt;</span>
<span class="cm">     * @method array</span>
<span class="cm">     * @param {Number} count Number of vec 3 to be layed out in memory</span>
<span class="cm">     * @param {Object} ref Optional, if set a memory reference is set to ref.mem</span>
<span class="cm">     * @return {KICK.math.vec3} New vec3</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">array</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">count</span><span class="p">,</span><span class="nx">ref</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">memory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="nx">count</span><span class="o">*</span><span class="mi">4</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ref</span><span class="p">){</span>
            <span class="nx">ref</span><span class="p">.</span><span class="nx">mem</span> <span class="o">=</span> <span class="nx">memory</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vec4</span><span class="p">.</span><span class="nx">wrapArray</span><span class="p">(</span><span class="nx">memory</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new instance of a vec4 using the default array type&lt;br&gt;</span>
<span class="cm">     * Any javascript array containing at least 4 numeric elements can serve as a vec4</span>
<span class="cm">     * @method create</span>
<span class="cm">     * @param {Array[Number]} vec Optional, vec4 containing values to initialize with</span>
<span class="cm">     * @return {KICK.math.vec4} New vec4</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the values of one vec4 to another</span>
<span class="cm">     * @method set</span>
<span class="cm">     * @param {KICK.math.vec4} vec vec4 containing values to copy</span>
<span class="cm">     * @param {KICK.math.vec4} dest vec4 receiving copied values</span>
<span class="cm">     * @return {KICK.math.vec4} dest</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector addition</span>
<span class="cm">     * @method add</span>
<span class="cm">     * @param {KICK.math.vec4} vec  first operand</span>
<span class="cm">     * @param {KICK.math.vec4} vec2  second operand</span>
<span class="cm">     * @param {KICK.math.vec4} dest Optional, vec4 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec4} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector subtraction</span>
<span class="cm">     * @method subtract</span>
<span class="cm">     * @param {KICK.math.vec4} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec4} vec2 second operand</span>
<span class="cm">     * @param {KICK.math.vec4} dest Optional, vec4 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec4} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">subtract</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a vector multiplication</span>
<span class="cm">     * @method multiply</span>
<span class="cm">     * @param {KICK.math.vec4} vec first operand</span>
<span class="cm">     * @param {KICK.math.vec4} vec2 second operand</span>
<span class="cm">     * @param {KICK.math.vec4} dest Optional, vec4 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec4} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">vec2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="nx">vec2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Negates the components of a vec4</span>
<span class="cm">     * @method negate</span>
<span class="cm">     * @param {KICK.math.vec4} vec vec4 to negate</span>
<span class="cm">     * @param {KICK.math.vec4} dest Optional, vec4 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec4} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">negate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the length of a vec4</span>
<span class="cm">     * @method length</span>
<span class="cm">     * @param {KICK.math.vec4} vec vec4 to calculate length of</span>
<span class="cm">     * @return {Number} Length of vec</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">w</span><span class="o">*</span><span class="nx">w</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Multiplies the components of a vec4 by a scalar value</span>
<span class="cm">     * @method scale</span>
<span class="cm">     * @param {KICK.math.vec4} vec vec4 to scale</span>
<span class="cm">     * @param {Number} val Numeric value to scale by</span>
<span class="cm">     * @param {KICK.math.vec4} dest Optional, vec4 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec4} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">vec</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">val</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">vec</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a vector</span>
<span class="cm">     * @method str</span>
<span class="cm">     * @param {KICK.math.vec4} vec vec4 to represent as a string</span>
<span class="cm">     * @return {String} string representation of vec</span>
<span class="cm">     */</span>
    <span class="nx">vec4</span><span class="p">.</span><span class="nx">str</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="c1">/////////////////////////////////////////</span>

    <span class="cm">/**</span>
<span class="cm">     * mat3 - 3x3 Matrix</span>
<span class="cm">     * @class mat3</span>
<span class="cm">     * @namespace KICK.math</span>
<span class="cm">     */</span>
    <span class="nx">math</span><span class="p">.</span><span class="nx">mat3</span> <span class="o">=</span> <span class="nx">mat3</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new instance of a mat3 using the default array type&lt;br&gt;</span>
<span class="cm">     * Any javascript array containing at least 9 numeric elements can serve as a mat3</span>
<span class="cm">     * @method create</span>
<span class="cm">     * @param {Array[Number]} mat Optional, mat3 containing values to initialize with</span>
<span class="cm">     * @return {KICK.math.mat3} New mat3</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the values of one mat3 to another</span>
<span class="cm">     * @method set</span>
<span class="cm">     * @param {KICK.math.mat3} mat mat3 containing values to copy</span>
<span class="cm">     * @param {KICK.math.mat3} dest mat3 receiving copied values</span>
<span class="cm">     * @return {KICK.math.mat3} dest</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Sets a mat3 to an identity matrix</span>
<span class="cm">     * @method identity</span>
<span class="cm">     * @param {KICK.math.mat3} dest mat3 to set</span>
<span class="cm">     * @return {KICK.math.mat3} dest</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Transposes a mat3 (flips the values over the diagonal)</span>
<span class="cm">     * @method transpose</span>
<span class="cm">     * @param {KICK.math.mat3} mat mat3 to transpose</span>
<span class="cm">     * @param {KICK.math.mat3} dest Optional, mat3 receiving transposed values. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat3} dest is specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">transpose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// If we are transposing ourselves we can skip a few steps but have to cache some values</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">mat</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

            <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a12</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">mat</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the elements of a mat3 into the upper 3x3 elements of a mat4</span>
<span class="cm">     * @method toMat4</span>
<span class="cm">     * @param {KICK.math.mat3} mat mat3 containing values to copy</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving copied values</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">toMat4</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a mat3</span>
<span class="cm">     * @method str</span>
<span class="cm">     * @param {KICK.math.mat3} mat mat3 to represent as a string</span>
<span class="cm">     * @return {String} string representation of mat</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">str</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a mat3 printed as a 4x4 matrix (on 3 lines)</span>
<span class="cm">     * @method strPretty</span>
<span class="cm">     * @param {KICK.math.mat3} mat mat3 to represent as a string</span>
<span class="cm">     * @return {String} string representation of mat</span>
<span class="cm">     */</span>
    <span class="nx">mat3</span><span class="p">.</span><span class="nx">strPretty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * mat4 - 4x4 Matrix&lt;br&gt;</span>
<span class="cm">     * @class mat4</span>
<span class="cm">     * @namespace KICK.math</span>
<span class="cm">     */</span>
    <span class="nx">math</span><span class="p">.</span><span class="nx">mat4</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new instance of a mat4 using the default array type&lt;br&gt;</span>
<span class="cm">     * Any javascript array containing at least 16 numeric elements can serve as a mat4</span>
<span class="cm">     * @method create</span>
<span class="cm">     * @param {Array[Number]} mat Optional, mat4 containing values to initialize with</span>
<span class="cm">     * @return {KICK.math.mat4} New mat4</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the values of one mat4 to another</span>
<span class="cm">     * @method set</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 containing values to copy</span>
<span class="cm">     * @param {KICK.math.mat4} dest mat4 receiving copied values</span>
<span class="cm">     * @return {KICK.math.mat4} dest</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Set translate, rotate, scale</span>
<span class="cm">     * @method setTRS</span>
<span class="cm">     * @param {KICK.math.vec3} translate</span>
<span class="cm">     * @param {KICK.math.quat4} rotateQuat</span>
<span class="cm">     * @param {KICK.math.vec3} scale</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optinal</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">setTRS</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">translate</span><span class="p">,</span> <span class="nx">rotateQuat</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">dest</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>
        <span class="c1">// todo: optimize this code</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">identity</span><span class="p">(</span><span class="nx">dest</span><span class="p">);</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span> <span class="nx">translate</span><span class="p">);</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="nx">quat4</span><span class="p">.</span><span class="nx">toMat4</span><span class="p">(</span><span class="nx">rotateQuat</span><span class="p">));</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span> <span class="nx">scale</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Set the inverse of translate, rotate, scale</span>
<span class="cm">     * @method setTRSInverse</span>
<span class="cm">     * @param {KICK.math.vec3} translate</span>
<span class="cm">     * @param {KICK.math.quat4} rotateQuat</span>
<span class="cm">     * @param {KICK.math.vec3} scale</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optinal</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">setTRSInverse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">translate</span><span class="p">,</span> <span class="nx">rotateQuat</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">dest</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>
        <span class="c1">// todo: optimize this code</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">identity</span><span class="p">(</span><span class="nx">dest</span><span class="p">);</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="nx">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">1</span><span class="o">/</span><span class="nx">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="o">/</span><span class="nx">scale</span><span class="p">[</span><span class="mi">2</span><span class="p">]]);</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="nx">quat4</span><span class="p">.</span><span class="nx">toMat4</span><span class="p">(</span><span class="nx">quat4</span><span class="p">.</span><span class="nx">inverse</span><span class="p">(</span><span class="nx">rotateQuat</span><span class="p">)));</span>
        <span class="nx">mat4</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="nx">translate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="o">-</span><span class="nx">translate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="o">-</span><span class="nx">translate</span><span class="p">[</span><span class="mi">2</span><span class="p">]]);</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Sets a mat4 to an identity matrix</span>
<span class="cm">     * @method identity</span>
<span class="cm">     * @param {KICK.math.mat4} dest mat4 to set</span>
<span class="cm">     * @return {KICK.math.mat4} dest</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Transposes a mat4 (flips the values over the diagonal)</span>
<span class="cm">     * @method transpose</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to transpose</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving transposed values. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest is specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">transpose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// If we are transposing ourselves we can skip a few steps but have to cache some values</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">mat</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
            <span class="kd">var</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>

            <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a12</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a13</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a23</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">mat</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the determinant of a mat4</span>
<span class="cm">     * @method determinant</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to calculate determinant of</span>
<span class="cm">     * @return {Number} determinant of mat</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">determinant</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a30</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="nx">a31</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="nx">a32</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="nx">a33</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>

        <span class="k">return</span>  <span class="nx">a30</span><span class="o">*</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a03</span> <span class="o">-</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a31</span><span class="o">*</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a03</span> <span class="o">-</span> <span class="nx">a30</span><span class="o">*</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a03</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">a31</span><span class="o">*</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a03</span> <span class="o">+</span>
            <span class="nx">a20</span><span class="o">*</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a32</span><span class="o">*</span><span class="nx">a03</span> <span class="o">-</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a32</span><span class="o">*</span><span class="nx">a03</span> <span class="o">-</span> <span class="nx">a30</span><span class="o">*</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a02</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a31</span><span class="o">*</span><span class="nx">a02</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span>
            <span class="nx">a30</span><span class="o">*</span><span class="nx">a01</span><span class="o">*</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a13</span> <span class="o">-</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a31</span><span class="o">*</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a13</span> <span class="o">-</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a01</span><span class="o">*</span><span class="nx">a32</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a32</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span>
            <span class="nx">a30</span><span class="o">*</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a02</span><span class="o">*</span><span class="nx">a23</span> <span class="o">-</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">a31</span><span class="o">*</span><span class="nx">a02</span><span class="o">*</span><span class="nx">a23</span> <span class="o">-</span> <span class="nx">a30</span><span class="o">*</span><span class="nx">a01</span><span class="o">*</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a23</span> <span class="o">+</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a31</span><span class="o">*</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a23</span> <span class="o">+</span>
            <span class="nx">a10</span><span class="o">*</span><span class="nx">a01</span><span class="o">*</span><span class="nx">a32</span><span class="o">*</span><span class="nx">a23</span> <span class="o">-</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a32</span><span class="o">*</span><span class="nx">a23</span> <span class="o">-</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a02</span><span class="o">*</span><span class="nx">a33</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a02</span><span class="o">*</span><span class="nx">a33</span> <span class="o">+</span>
            <span class="nx">a20</span><span class="o">*</span><span class="nx">a01</span><span class="o">*</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a33</span> <span class="o">-</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a33</span> <span class="o">-</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">a01</span><span class="o">*</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a33</span> <span class="o">+</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a33</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the inverse matrix of a mat4</span>
<span class="cm">     * @method inverse</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to calculate inverse of</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving inverse matrix. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest is specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">inverse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">;</span> <span class="p">}</span>

        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a30</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="nx">a31</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="nx">a32</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="nx">a33</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">b00</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a11</span> <span class="o">-</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a10</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b01</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a12</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a10</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b02</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">a13</span> <span class="o">-</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">a10</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b03</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a12</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a11</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b04</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a13</span> <span class="o">-</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">a11</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b05</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a13</span> <span class="o">-</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">a12</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b06</span> <span class="o">=</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a31</span> <span class="o">-</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b07</span> <span class="o">=</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a32</span> <span class="o">-</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b08</span> <span class="o">=</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">a33</span> <span class="o">-</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b09</span> <span class="o">=</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">a32</span> <span class="o">-</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">a31</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b10</span> <span class="o">=</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">a33</span> <span class="o">-</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">a31</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b11</span> <span class="o">=</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">a33</span> <span class="o">-</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">a32</span><span class="p">;</span>

        <span class="c1">// Calculate the determinant (inlined to avoid double-caching)</span>
        <span class="kd">var</span> <span class="nx">invDet</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="nx">b00</span><span class="o">*</span><span class="nx">b11</span> <span class="o">-</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">b02</span><span class="o">*</span><span class="nx">b09</span> <span class="o">+</span> <span class="nx">b03</span><span class="o">*</span><span class="nx">b08</span> <span class="o">-</span> <span class="nx">b04</span><span class="o">*</span><span class="nx">b07</span> <span class="o">+</span> <span class="nx">b05</span><span class="o">*</span><span class="nx">b06</span><span class="p">);</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a11</span><span class="o">*</span><span class="nx">b11</span> <span class="o">-</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">b09</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a01</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b10</span> <span class="o">-</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">b09</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a31</span><span class="o">*</span><span class="nx">b05</span> <span class="o">-</span> <span class="nx">a32</span><span class="o">*</span><span class="nx">b04</span> <span class="o">+</span> <span class="nx">a33</span><span class="o">*</span><span class="nx">b03</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a21</span><span class="o">*</span><span class="nx">b05</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">b04</span> <span class="o">-</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">b03</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a10</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">b08</span> <span class="o">-</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">b07</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a00</span><span class="o">*</span><span class="nx">b11</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b08</span> <span class="o">+</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">b07</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a30</span><span class="o">*</span><span class="nx">b05</span> <span class="o">+</span> <span class="nx">a32</span><span class="o">*</span><span class="nx">b02</span> <span class="o">-</span> <span class="nx">a33</span><span class="o">*</span><span class="nx">b01</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a20</span><span class="o">*</span><span class="nx">b05</span> <span class="o">-</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">b02</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">b01</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a10</span><span class="o">*</span><span class="nx">b10</span> <span class="o">-</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">b08</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">b06</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a00</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b08</span> <span class="o">-</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">b06</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a30</span><span class="o">*</span><span class="nx">b04</span> <span class="o">-</span> <span class="nx">a31</span><span class="o">*</span><span class="nx">b02</span> <span class="o">+</span> <span class="nx">a33</span><span class="o">*</span><span class="nx">b00</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a20</span><span class="o">*</span><span class="nx">b04</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">b02</span> <span class="o">-</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">b00</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a10</span><span class="o">*</span><span class="nx">b09</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">b07</span> <span class="o">-</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">b06</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a00</span><span class="o">*</span><span class="nx">b09</span> <span class="o">-</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b07</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b06</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a30</span><span class="o">*</span><span class="nx">b03</span> <span class="o">+</span> <span class="nx">a31</span><span class="o">*</span><span class="nx">b01</span> <span class="o">-</span> <span class="nx">a32</span><span class="o">*</span><span class="nx">b00</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a20</span><span class="o">*</span><span class="nx">b03</span> <span class="o">-</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">b00</span><span class="p">)</span><span class="o">*</span><span class="nx">invDet</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the upper 3x3 elements of a mat4 into another mat4</span>
<span class="cm">     * @method toRotationMat</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 containing values to copy</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving copied values</span>
<span class="cm">     * @return {KICK.math.mat4} dest is specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">toRotationMat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the upper 3x3 elements of a mat4 into a mat3</span>
<span class="cm">     * @method toMat3</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 containing values to copy</span>
<span class="cm">     * @param {KICK.math.mat3} dest Optional, mat3 receiving copied values</span>
<span class="cm">     * return {KICK.math.mat3} dest is specified, a new mat3 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">toMat3</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the normal matrix (that is the transpose of the inverse of the upper 3x3 elements of a mat4) and</span>
<span class="cm">     * copies the result into a mat3&lt;br&gt;</span>
<span class="cm">     * @method toNormalMat3</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 containing values to tranpose, invert and copy</span>
<span class="cm">     * @param {KICK.math.mat3} dest Optional, mat3 receiving values</span>
<span class="cm">     * @return {KICK.math.mat3} dest is specified, a new mat3 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">toNormalMat3</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">){</span>
        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
            <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">b01</span> <span class="o">=</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">a11</span><span class="o">-</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a21</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b11</span> <span class="o">=</span> <span class="o">-</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a10</span><span class="o">+</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a20</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b21</span> <span class="o">=</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">a10</span><span class="o">-</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a20</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b21</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="nx">d</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a01</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a21</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a01</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a11</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b11</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a00</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a20</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a10</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b21</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a20</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a00</span> <span class="o">-</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a10</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the inverse of the upper 3x3 elements of a mat4 and copies the result into a mat3&lt;br&gt;</span>
<span class="cm">     * The resulting matrix is useful for calculating transformed normals</span>
<span class="cm">     * @method toInverseMat3</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 containing values to invert and copy</span>
<span class="cm">     * @param {KICK.math.mat3} dest Optional, mat3 receiving values</span>
<span class="cm">     * @return {KICK.math.mat3} dest is specified, a new mat3 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">toInverseMat3</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">b01</span> <span class="o">=</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">a11</span><span class="o">-</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a21</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b11</span> <span class="o">=</span> <span class="o">-</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a10</span><span class="o">+</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a20</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b21</span> <span class="o">=</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">a10</span><span class="o">-</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a20</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b21</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="nx">d</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a01</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a21</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a01</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a11</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b11</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a22</span><span class="o">*</span><span class="nx">a00</span> <span class="o">-</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a20</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a12</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">a10</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b21</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="nx">a21</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a20</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a11</span><span class="o">*</span><span class="nx">a00</span> <span class="o">-</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">a10</span><span class="p">)</span><span class="o">*</span><span class="nx">id</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a matrix multiplication</span>
<span class="cm">     * @method multiply</span>
<span class="cm">     * @param {KICK.math.mat4} mat first operand</span>
<span class="cm">     * @param {KICK.math.mat4} mat2 second operand</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">mat2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat</span> <span class="p">}</span>

        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a30</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="nx">a31</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="nx">a32</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="nx">a33</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>

        <span class="kd">var</span> <span class="nx">b00</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b01</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">b02</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">b03</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">b10</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">b11</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">b12</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">b13</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">b20</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">b21</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">b22</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">b23</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">b30</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="nx">b31</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="nx">b32</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="nx">b33</span> <span class="o">=</span> <span class="nx">mat2</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b00</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">a10</span> <span class="o">+</span> <span class="nx">b02</span><span class="o">*</span><span class="nx">a20</span> <span class="o">+</span> <span class="nx">b03</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b00</span><span class="o">*</span><span class="nx">a01</span> <span class="o">+</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">a11</span> <span class="o">+</span> <span class="nx">b02</span><span class="o">*</span><span class="nx">a21</span> <span class="o">+</span> <span class="nx">b03</span><span class="o">*</span><span class="nx">a31</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b00</span><span class="o">*</span><span class="nx">a02</span> <span class="o">+</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">a12</span> <span class="o">+</span> <span class="nx">b02</span><span class="o">*</span><span class="nx">a22</span> <span class="o">+</span> <span class="nx">b03</span><span class="o">*</span><span class="nx">a32</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b00</span><span class="o">*</span><span class="nx">a03</span> <span class="o">+</span> <span class="nx">b01</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span> <span class="nx">b02</span><span class="o">*</span><span class="nx">a23</span> <span class="o">+</span> <span class="nx">b03</span><span class="o">*</span><span class="nx">a33</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b10</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">b11</span><span class="o">*</span><span class="nx">a10</span> <span class="o">+</span> <span class="nx">b12</span><span class="o">*</span><span class="nx">a20</span> <span class="o">+</span> <span class="nx">b13</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b10</span><span class="o">*</span><span class="nx">a01</span> <span class="o">+</span> <span class="nx">b11</span><span class="o">*</span><span class="nx">a11</span> <span class="o">+</span> <span class="nx">b12</span><span class="o">*</span><span class="nx">a21</span> <span class="o">+</span> <span class="nx">b13</span><span class="o">*</span><span class="nx">a31</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b10</span><span class="o">*</span><span class="nx">a02</span> <span class="o">+</span> <span class="nx">b11</span><span class="o">*</span><span class="nx">a12</span> <span class="o">+</span> <span class="nx">b12</span><span class="o">*</span><span class="nx">a22</span> <span class="o">+</span> <span class="nx">b13</span><span class="o">*</span><span class="nx">a32</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b10</span><span class="o">*</span><span class="nx">a03</span> <span class="o">+</span> <span class="nx">b11</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span> <span class="nx">b12</span><span class="o">*</span><span class="nx">a23</span> <span class="o">+</span> <span class="nx">b13</span><span class="o">*</span><span class="nx">a33</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b20</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">b21</span><span class="o">*</span><span class="nx">a10</span> <span class="o">+</span> <span class="nx">b22</span><span class="o">*</span><span class="nx">a20</span> <span class="o">+</span> <span class="nx">b23</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b20</span><span class="o">*</span><span class="nx">a01</span> <span class="o">+</span> <span class="nx">b21</span><span class="o">*</span><span class="nx">a11</span> <span class="o">+</span> <span class="nx">b22</span><span class="o">*</span><span class="nx">a21</span> <span class="o">+</span> <span class="nx">b23</span><span class="o">*</span><span class="nx">a31</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b20</span><span class="o">*</span><span class="nx">a02</span> <span class="o">+</span> <span class="nx">b21</span><span class="o">*</span><span class="nx">a12</span> <span class="o">+</span> <span class="nx">b22</span><span class="o">*</span><span class="nx">a22</span> <span class="o">+</span> <span class="nx">b23</span><span class="o">*</span><span class="nx">a32</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b20</span><span class="o">*</span><span class="nx">a03</span> <span class="o">+</span> <span class="nx">b21</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span> <span class="nx">b22</span><span class="o">*</span><span class="nx">a23</span> <span class="o">+</span> <span class="nx">b23</span><span class="o">*</span><span class="nx">a33</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b30</span><span class="o">*</span><span class="nx">a00</span> <span class="o">+</span> <span class="nx">b31</span><span class="o">*</span><span class="nx">a10</span> <span class="o">+</span> <span class="nx">b32</span><span class="o">*</span><span class="nx">a20</span> <span class="o">+</span> <span class="nx">b33</span><span class="o">*</span><span class="nx">a30</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b30</span><span class="o">*</span><span class="nx">a01</span> <span class="o">+</span> <span class="nx">b31</span><span class="o">*</span><span class="nx">a11</span> <span class="o">+</span> <span class="nx">b32</span><span class="o">*</span><span class="nx">a21</span> <span class="o">+</span> <span class="nx">b33</span><span class="o">*</span><span class="nx">a31</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b30</span><span class="o">*</span><span class="nx">a02</span> <span class="o">+</span> <span class="nx">b31</span><span class="o">*</span><span class="nx">a12</span> <span class="o">+</span> <span class="nx">b32</span><span class="o">*</span><span class="nx">a22</span> <span class="o">+</span> <span class="nx">b33</span><span class="o">*</span><span class="nx">a32</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b30</span><span class="o">*</span><span class="nx">a03</span> <span class="o">+</span> <span class="nx">b31</span><span class="o">*</span><span class="nx">a13</span> <span class="o">+</span> <span class="nx">b32</span><span class="o">*</span><span class="nx">a23</span> <span class="o">+</span> <span class="nx">b33</span><span class="o">*</span><span class="nx">a33</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Transforms a vec3 with the given matrix&lt;br&gt;</span>
<span class="cm">     * 4th vector component is implicitly &#39;1&#39;</span>
<span class="cm">     * @method multiplyVec3</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to transform the vector with</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to transform</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiplyVec3</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Transforms a vec3 with the given matrix&lt;br&gt;</span>
<span class="cm">     * 4th vector component is implicitly &#39;0&#39;</span>
<span class="cm">     * @method multiplyVec3Vector</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to transform the vector with</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to transform</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiplyVec3Vector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Transforms a vec4 with the given matrix</span>
<span class="cm">     * @method multiplyVec4</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to transform the vector with</span>
<span class="cm">     * @param {KICK.math.vec4} vec vec4 to transform</span>
<span class="cm">     * @param {KICK.math.vec4} dest Optional, vec4 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec4} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">multiplyVec4</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">*</span><span class="nx">w</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="o">*</span><span class="nx">w</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span><span class="o">*</span><span class="nx">w</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span><span class="o">*</span><span class="nx">w</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Translates a matrix by the given vector</span>
<span class="cm">     * @method translate</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to translate</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 specifying the translation</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">translate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">mat</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">mat</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a10</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a11</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a12</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a13</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a20</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a21</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a22</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a23</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Scales a matrix by the given vector</span>
<span class="cm">     * @method scale</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to scale</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 specifying the scale for each axis</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">mat</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">x</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">y</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">z</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">z</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">z</span><span class="p">;</span>
            <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">z</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">mat</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Rotates a matrix by three rotations given in eulers angles&lt;br&gt;</span>
<span class="cm">     * If rotating around a primary axis (X,Y,Z) one of the specialized rotation functions should be used instead for performance</span>
<span class="cm">     * @method rotateEuler</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to rotate</span>
<span class="cm">     * @param {KICK.math.vec3} angle angle (in degrees) to rotate</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateEuler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">euler</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">degreeToRadian</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">Constants</span><span class="p">.</span><span class="nx">_DEGREE_TO_RADIAN</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">mat4</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span><span class="nx">dest</span><span class="p">);</span>
            <span class="nx">mat</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// todo: Optimized code!!!</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">euler</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateZ</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">euler</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">degreeToRadian</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">euler</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateY</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">euler</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">degreeToRadian</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">euler</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateX</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">euler</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">degreeToRadian</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">mat</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Rotates a matrix by the given angle around the specified axis&lt;br&gt;</span>
<span class="cm">     * If rotating around a primary axis (X,Y,Z) one of the specialized rotation functions should be used instead for</span>
<span class="cm">     * performance</span>
<span class="cm">     * @method rotate</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to rotate</span>
<span class="cm">     * @param {Number} angle angle (in radians) to rotate</span>
<span class="cm">     * @param {KICK.math.vec3} axis vec3 representing the axis to rotate around</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="nx">axis</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">axis</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">axis</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">axis</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">len</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">x</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">y</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">z</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="nx">c</span><span class="p">;</span>

        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>

        <span class="c1">// Construct the elements of the rotation matrix</span>
        <span class="kd">var</span> <span class="nx">b00</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">b01</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">x</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">s</span><span class="p">,</span> <span class="nx">b02</span> <span class="o">=</span> <span class="nx">z</span><span class="o">*</span><span class="nx">x</span><span class="o">*</span><span class="nx">t</span> <span class="o">-</span> <span class="nx">y</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b10</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">y</span><span class="o">*</span><span class="nx">t</span> <span class="o">-</span> <span class="nx">z</span><span class="o">*</span><span class="nx">s</span><span class="p">,</span> <span class="nx">b11</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">b12</span> <span class="o">=</span> <span class="nx">z</span><span class="o">*</span><span class="nx">y</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">x</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">b20</span> <span class="o">=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">z</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">s</span><span class="p">,</span> <span class="nx">b21</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">z</span><span class="o">*</span><span class="nx">t</span> <span class="o">-</span> <span class="nx">x</span><span class="o">*</span><span class="nx">s</span><span class="p">,</span> <span class="nx">b22</span> <span class="o">=</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">c</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">mat</span> <span class="o">!=</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// If the source and destination differ, copy the unchanged last row</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="c1">// Perform rotation-specific matrix multiplication</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">b00</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">b02</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b00</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">b02</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b00</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">b02</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">b00</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">b01</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">b02</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">b12</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">b12</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">b12</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">b10</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">b11</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">b12</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">b20</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">b21</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">b22</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">b20</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">b21</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">b22</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">b20</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">b21</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">b22</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">b20</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">b21</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">b22</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Rotates a matrix by the given angle around the X axis</span>
<span class="cm">     * @method rotateX</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to rotate</span>
<span class="cm">     * @param {Number} angle angle (in radians) to rotate</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateX</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>

        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">mat</span> <span class="o">!=</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// If the source and destination differ, copy the unchanged rows</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

            <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="c1">// Perform axis-specific matrix multiplication</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a10</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a11</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a12</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a13</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Rotates a matrix by the given angle around the Y axis</span>
<span class="cm">     * @method rotateY</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to rotate</span>
<span class="cm">     * @param {Number} angle angle (in radians) to rotate</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateY</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>

        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a20</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">a21</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">a22</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="nx">a23</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">mat</span> <span class="o">!=</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// If the source and destination differ, copy the unchanged rows</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

            <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="c1">// Perform axis-specific matrix multiplication</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*-</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*-</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*-</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*-</span><span class="nx">s</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a20</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a21</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a22</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a23</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Rotates a matrix by the given angle around the Z axis</span>
<span class="cm">     * @method rotateZ</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to rotate</span>
<span class="cm">     * @param {Number} angle angle (in radians) to rotate</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result. If not specified result is written to mat</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, mat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">rotateZ</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="p">);</span>

        <span class="c1">// Cache the matrix values (makes for huge speed increases!)</span>
        <span class="kd">var</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a01</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a02</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a03</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">a10</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">a11</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">a12</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">a13</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">mat</span> <span class="o">!=</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// If the source and destination differ, copy the unchanged last row</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>

            <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="c1">// Perform axis-specific matrix multiplication</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*</span><span class="nx">c</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a00</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a10</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a01</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a11</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a02</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a12</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a03</span><span class="o">*-</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">a13</span><span class="o">*</span><span class="nx">c</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a frustum matrix with the given bounds</span>
<span class="cm">     * @method frustum</span>
<span class="cm">     * @param {Number} left left bounds of the frustum</span>
<span class="cm">     * @param {Number} right right bounds of the frustum</span>
<span class="cm">     * @param {Number} bottom bottom bounds of the frustum</span>
<span class="cm">     * @param {Number} top top bounds of the frustum</span>
<span class="cm">     * @param {Number} near near bounds of the frustum</span>
<span class="cm">     * @param {Number} far far bounds of the frustum</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 frustum matrix will be written into</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">frustum</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">,</span> <span class="nx">bottom</span><span class="p">,</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">near</span><span class="p">,</span> <span class="nx">far</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">rl</span> <span class="o">=</span> <span class="p">(</span><span class="nx">right</span> <span class="o">-</span> <span class="nx">left</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">tb</span> <span class="o">=</span> <span class="p">(</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">bottom</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">far</span> <span class="o">-</span> <span class="nx">near</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">near</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="nx">rl</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">near</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="nx">tb</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">right</span> <span class="o">+</span> <span class="nx">left</span><span class="p">)</span> <span class="o">/</span> <span class="nx">rl</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">bottom</span><span class="p">)</span> <span class="o">/</span> <span class="nx">tb</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">far</span> <span class="o">+</span> <span class="nx">near</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fn</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">far</span><span class="o">*</span><span class="nx">near</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fn</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a perspective projection matrix with the given bounds</span>
<span class="cm">     * @method perspective</span>
<span class="cm">     * @param {Number} fovy vertical field of view</span>
<span class="cm">     * @param {Number} aspect aspect ratio. typically viewport width/height</span>
<span class="cm">     * @param {Number} near near bounds of the frustum</span>
<span class="cm">     * @param {Number} far far bounds of the frustum</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 frustum matrix will be written into</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">perspective</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fovy</span><span class="p">,</span> <span class="nx">aspect</span><span class="p">,</span> <span class="nx">near</span><span class="p">,</span> <span class="nx">far</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="nx">near</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="nx">fovy</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mf">360.0</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">top</span><span class="o">*</span><span class="nx">aspect</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">frustum</span><span class="p">(</span><span class="o">-</span><span class="nx">right</span><span class="p">,</span> <span class="nx">right</span><span class="p">,</span> <span class="o">-</span><span class="nx">top</span><span class="p">,</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">near</span><span class="p">,</span> <span class="nx">far</span><span class="p">,</span> <span class="nx">dest</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a orthogonal projection matrix with the given bounds</span>
<span class="cm">     * @method ortho</span>
<span class="cm">     * @param {Number} left left bounds of the frustum</span>
<span class="cm">     * @param {Number} right right bounds of the frustum</span>
<span class="cm">     * @param {Number} bottom bottom bounds of the frustum</span>
<span class="cm">     * @param {Number} top top bounds of the frustum</span>
<span class="cm">     * @param {Number} near near bounds of the frustum</span>
<span class="cm">     * @param {Number} far far bounds of the frustum</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 frustum matrix will be written into</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">ortho</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">,</span> <span class="nx">bottom</span><span class="p">,</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">near</span><span class="p">,</span> <span class="nx">far</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">rl</span> <span class="o">=</span> <span class="p">(</span><span class="nx">right</span> <span class="o">-</span> <span class="nx">left</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">tb</span> <span class="o">=</span> <span class="p">(</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">bottom</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">far</span> <span class="o">-</span> <span class="nx">near</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">/</span> <span class="nx">rl</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">/</span> <span class="nx">tb</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="o">/</span> <span class="nx">fn</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">right</span><span class="p">)</span> <span class="o">/</span> <span class="nx">rl</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">bottom</span><span class="p">)</span> <span class="o">/</span> <span class="nx">tb</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">far</span> <span class="o">+</span> <span class="nx">near</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fn</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a look-at matrix with the given eye position, focal point, and up axis</span>
<span class="cm">     * @method lookAt</span>
<span class="cm">     * @param {KICK.math.vec3} eye position of the viewer</span>
<span class="cm">     * @param {KICK.math.vec3} center point the viewer is looking at</span>
<span class="cm">     * @param {KICK.math.vec3} up vec3 pointing &quot;up&quot;</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 frustum matrix will be written into</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">lookAt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eye</span><span class="p">,</span> <span class="nx">center</span><span class="p">,</span> <span class="nx">up</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">eyex</span> <span class="o">=</span> <span class="nx">eye</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">eyey</span> <span class="o">=</span> <span class="nx">eye</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">eyez</span> <span class="o">=</span> <span class="nx">eye</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">upx</span> <span class="o">=</span> <span class="nx">up</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">upy</span> <span class="o">=</span> <span class="nx">up</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">upz</span> <span class="o">=</span> <span class="nx">up</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">centerx</span> <span class="o">=</span> <span class="nx">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">centery</span> <span class="o">=</span> <span class="nx">center</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">centerz</span> <span class="o">=</span> <span class="nx">center</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">eyex</span> <span class="o">==</span> <span class="nx">centerx</span> <span class="o">&amp;&amp;</span> <span class="nx">eyey</span> <span class="o">==</span> <span class="nx">centery</span> <span class="o">&amp;&amp;</span> <span class="nx">eyez</span> <span class="o">==</span> <span class="nx">centerz</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">identity</span><span class="p">(</span><span class="nx">dest</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">z0</span><span class="p">,</span><span class="nx">z1</span><span class="p">,</span><span class="nx">z2</span><span class="p">,</span><span class="nx">x0</span><span class="p">,</span><span class="nx">x1</span><span class="p">,</span><span class="nx">x2</span><span class="p">,</span><span class="nx">y0</span><span class="p">,</span><span class="nx">y1</span><span class="p">,</span><span class="nx">y2</span><span class="p">,</span><span class="nx">len</span><span class="p">;</span>

        <span class="c1">//vec3.direction(eye, center, z);</span>
        <span class="nx">z0</span> <span class="o">=</span> <span class="nx">eyex</span> <span class="o">-</span> <span class="nx">center</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">z1</span> <span class="o">=</span> <span class="nx">eyey</span> <span class="o">-</span> <span class="nx">center</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">z2</span> <span class="o">=</span> <span class="nx">eyez</span> <span class="o">-</span> <span class="nx">center</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="c1">// normalize (no check needed for 0 because of early return)</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">z0</span><span class="o">*</span><span class="nx">z0</span> <span class="o">+</span> <span class="nx">z1</span><span class="o">*</span><span class="nx">z1</span> <span class="o">+</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">z2</span><span class="p">);</span>
        <span class="nx">z0</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">z1</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">z2</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>

        <span class="c1">//vec3.normalize(vec3.cross(up, z, x));</span>
        <span class="nx">x0</span> <span class="o">=</span> <span class="nx">upy</span><span class="o">*</span><span class="nx">z2</span> <span class="o">-</span> <span class="nx">upz</span><span class="o">*</span><span class="nx">z1</span><span class="p">;</span>
        <span class="nx">x1</span> <span class="o">=</span> <span class="nx">upz</span><span class="o">*</span><span class="nx">z0</span> <span class="o">-</span> <span class="nx">upx</span><span class="o">*</span><span class="nx">z2</span><span class="p">;</span>
        <span class="nx">x2</span> <span class="o">=</span> <span class="nx">upx</span><span class="o">*</span><span class="nx">z1</span> <span class="o">-</span> <span class="nx">upy</span><span class="o">*</span><span class="nx">z0</span><span class="p">;</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x0</span><span class="o">*</span><span class="nx">x0</span> <span class="o">+</span> <span class="nx">x1</span><span class="o">*</span><span class="nx">x1</span> <span class="o">+</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">x2</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">x0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">x1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">x2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="nx">len</span><span class="p">;</span>
            <span class="nx">x0</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">x1</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">x2</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="c1">//vec3.normalize(vec3.cross(z, x, y));</span>
        <span class="nx">y0</span> <span class="o">=</span> <span class="nx">z1</span><span class="o">*</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">x1</span><span class="p">;</span>
        <span class="nx">y1</span> <span class="o">=</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">x0</span> <span class="o">-</span> <span class="nx">z0</span><span class="o">*</span><span class="nx">x2</span><span class="p">;</span>
        <span class="nx">y2</span> <span class="o">=</span> <span class="nx">z0</span><span class="o">*</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">z1</span><span class="o">*</span><span class="nx">x0</span><span class="p">;</span>

        <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">y0</span><span class="o">*</span><span class="nx">y0</span> <span class="o">+</span> <span class="nx">y1</span><span class="o">*</span><span class="nx">y1</span> <span class="o">+</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">y2</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">y0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">y1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">y2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="nx">len</span><span class="p">;</span>
            <span class="nx">y0</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">y1</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
            <span class="nx">y2</span> <span class="o">*=</span> <span class="nx">len</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z1</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x2</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y2</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z2</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">x0</span><span class="o">*</span><span class="nx">eyex</span> <span class="o">+</span> <span class="nx">x1</span><span class="o">*</span><span class="nx">eyey</span> <span class="o">+</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">eyez</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">y0</span><span class="o">*</span><span class="nx">eyex</span> <span class="o">+</span> <span class="nx">y1</span><span class="o">*</span><span class="nx">eyey</span> <span class="o">+</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">eyez</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">z0</span><span class="o">*</span><span class="nx">eyex</span> <span class="o">+</span> <span class="nx">z1</span><span class="o">*</span><span class="nx">eyey</span> <span class="o">+</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">eyez</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a mat4</span>
<span class="cm">     * @method str</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to represent as a string</span>
<span class="cm">     * @return {String} string representation of mat</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">str</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a mat4 printed as a 4x4 matrix (on 4 lines)</span>
<span class="cm">     * @method strPretty</span>
<span class="cm">     * @param {KICK.math.mat4} mat mat4 to represent as a string</span>
<span class="cm">     * @return {String} string representation of mat</span>
<span class="cm">     */</span>
    <span class="nx">mat4</span><span class="p">.</span><span class="nx">strPretty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;\n&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">+</span><span class="s1">&#39;\n&#39;</span> <span class="o">+</span>
            <span class="s1">&#39;, &#39;</span><span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">mat</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * quat4 - Quaternions</span>
<span class="cm">     * @class quat4</span>
<span class="cm">     * @namespace KICK.math</span>
<span class="cm">     */</span>
    <span class="nx">math</span><span class="p">.</span><span class="nx">quat4</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Creates a new instance of a quat4 using the default array type&lt;br&gt;</span>
<span class="cm">     * Any javascript array containing at least 4 numeric elements can serve as a quat4</span>
<span class="cm">     * @method create</span>
<span class="cm">     * @param {Array[Number]} quat Optional, quat4 containing values to initialize with</span>
<span class="cm">     * @return {KICK.math.quat4} New quat4</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="nx">vec4</span><span class="p">.</span><span class="nx">create</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Copies the values of one quat4 to another</span>
<span class="cm">     * @method set</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 containing values to copy</span>
<span class="cm">     * @param {KICK.math.quat4} dest quat4 receiving copied values</span>
<span class="cm">     * @return {KICK.math.quat4} dest</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="nx">vec4</span><span class="p">.</span><span class="nx">set</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the W component of a quat4 from the X, Y, and Z components.&lt;br&gt;</span>
<span class="cm">     * Assumes that quaternion is 1 unit in length.&lt;br&gt;</span>
<span class="cm">     * Any existing W component will be ignored.</span>
<span class="cm">     * @method calculateW</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to calculate W component of</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving calculated values. If not specified result is written to quat</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, quat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">calculateW</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">quat</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">));</span>
            <span class="k">return</span> <span class="nx">quat</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">));</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the inverse of a quat4</span>
<span class="cm">     * @method inverse</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to calculate inverse of</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving inverse values. If not specified result is written to quat</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, quat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">inverse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span> <span class="o">||</span> <span class="nx">quat</span> <span class="o">==</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">quat</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates the length of a quat4</span>
<span class="cm">     * @method length</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to calculate length of</span>
<span class="cm">     * @return {Number} Length of quat</span>
<span class="cm">     *</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">vec4</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Generates a unit quaternion of the same direction as the provided quat4&lt;br&gt;</span>
<span class="cm">     * If quaternion length is 0, returns [0, 0, 0, 0]</span>
<span class="cm">     * @method normalize</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to normalize</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving operation result. If not specified result is written to quat</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, quat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">normalize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">w</span><span class="o">*</span><span class="nx">w</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">len</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">w</span> <span class="o">*</span> <span class="nx">len</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a quaternion multiplication</span>
<span class="cm">     * @method multiply</span>
<span class="cm">     * @param {KICK.math.quat4} quat first operand</span>
<span class="cm">     * @param {KICK.math.quat4} quat2 second operand</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving operation result. If not specified result is written to quat</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, quat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">quat2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">qax</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">qay</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">qaz</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">qaw</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">qbx</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">qby</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">qbz</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">qbw</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">+</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qbx</span> <span class="o">+</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qbz</span> <span class="o">-</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qby</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">+</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qby</span> <span class="o">+</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qbx</span> <span class="o">-</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qbz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">+</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qbz</span> <span class="o">+</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qby</span> <span class="o">-</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qbx</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">-</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qbx</span> <span class="o">-</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qby</span> <span class="o">-</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qbz</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Transforms a vec3 with the given quaternion</span>
<span class="cm">     * @method multiplyVec3</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to transform the vector with</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 to transform</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3 receiving operation result. If not specified result is written to vec</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, vec otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">multiplyVec3</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="kd">var</span> <span class="nx">qx</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">qy</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">qz</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">qw</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="c1">// calculate quat * vec</span>
        <span class="kd">var</span> <span class="nx">ix</span> <span class="o">=</span> <span class="nx">qw</span><span class="o">*</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">qy</span><span class="o">*</span><span class="nx">z</span> <span class="o">-</span> <span class="nx">qz</span><span class="o">*</span><span class="nx">y</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">iy</span> <span class="o">=</span> <span class="nx">qw</span><span class="o">*</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">qz</span><span class="o">*</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">qx</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">iz</span> <span class="o">=</span> <span class="nx">qw</span><span class="o">*</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">qx</span><span class="o">*</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">qy</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">iw</span> <span class="o">=</span> <span class="o">-</span><span class="nx">qx</span><span class="o">*</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">qy</span><span class="o">*</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">qz</span><span class="o">*</span><span class="nx">z</span><span class="p">;</span>

        <span class="c1">// calculate result * inverse quat</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ix</span><span class="o">*</span><span class="nx">qw</span> <span class="o">+</span> <span class="nx">iw</span><span class="o">*-</span><span class="nx">qx</span> <span class="o">+</span> <span class="nx">iy</span><span class="o">*-</span><span class="nx">qz</span> <span class="o">-</span> <span class="nx">iz</span><span class="o">*-</span><span class="nx">qy</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">iy</span><span class="o">*</span><span class="nx">qw</span> <span class="o">+</span> <span class="nx">iw</span><span class="o">*-</span><span class="nx">qy</span> <span class="o">+</span> <span class="nx">iz</span><span class="o">*-</span><span class="nx">qx</span> <span class="o">-</span> <span class="nx">ix</span><span class="o">*-</span><span class="nx">qz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">iz</span><span class="o">*</span><span class="nx">qw</span> <span class="o">+</span> <span class="nx">iw</span><span class="o">*-</span><span class="nx">qz</span> <span class="o">+</span> <span class="nx">ix</span><span class="o">*-</span><span class="nx">qy</span> <span class="o">-</span> <span class="nx">iy</span><span class="o">*-</span><span class="nx">qx</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Set the identity to the quaternion (0,0,0,1)</span>
<span class="cm">     * @method identity</span>
<span class="cm">     * @param {KICK.math.quat4} quat Optional, quat4 to set the identity to</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, a new quat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dest</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates a rotation represented in eulers angles (in degrees)</span>
<span class="cm">     * @method toEuler</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to create matrix from</span>
<span class="cm">     * @param {KICK.math.vec3} dest Optional, vec3  receiving operation result</span>
<span class="cm">     * @return {KICK.math.vec3} dest if specified, a new vec3 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">toEuler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="nx">yy</span> <span class="o">=</span> <span class="nx">y</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">radianToDegree</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">Constants</span><span class="p">.</span><span class="nx">_RADIAN_TO_DEGREE</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">vec3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="nx">w</span><span class="o">*</span><span class="nx">x</span><span class="o">+</span><span class="nx">y</span><span class="o">*</span><span class="nx">z</span><span class="p">),</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="o">+</span><span class="nx">yy</span><span class="p">))</span><span class="o">*</span><span class="nx">radianToDegree</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="nx">w</span><span class="o">*</span><span class="nx">y</span><span class="o">-</span><span class="nx">z</span><span class="o">*</span><span class="nx">x</span><span class="p">))</span><span class="o">*</span><span class="nx">radianToDegree</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="nx">w</span><span class="o">*</span><span class="nx">z</span><span class="o">+</span><span class="nx">x</span><span class="o">*</span><span class="nx">y</span><span class="p">),</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="nx">yy</span><span class="o">+</span><span class="nx">z</span><span class="o">*</span><span class="nx">z</span><span class="p">))</span><span class="o">*</span><span class="nx">radianToDegree</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Set the rotation based on eulers angles.</span>
<span class="cm">     * @method angleAxis</span>
<span class="cm">     * @param {Number} angle rotation angle in degrees</span>
<span class="cm">     * @param {KICK.math.vec3} vec normalized axis</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving operation result</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, a new quat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">angleAxis</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">angle</span><span class="p">,</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">degreeToRadian</span> <span class="o">=</span> <span class="nx">KICK</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">Constants</span><span class="p">.</span><span class="nx">_DEGREE_TO_RADIAN</span><span class="p">,</span>
            <span class="nx">angleRadiansHalf</span> <span class="o">=</span> <span class="nx">degreeToRadian</span><span class="o">*</span><span class="mf">0.5</span><span class="o">*</span><span class="nx">angle</span><span class="p">,</span>
            <span class="nx">s</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angleRadiansHalf</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angleRadiansHalf</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">s</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Set the rotation based on eulers angles.</span>
<span class="cm">     * @method setEuler</span>
<span class="cm">     * @param {KICK.math.vec3} vec vec3 eulers angles (degrees)</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving operation result</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, a new quat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">setEuler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vec</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">axisX</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">.</span><span class="nx">angleAxis</span><span class="p">(</span><span class="nx">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span>
            <span class="nx">axisY</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">.</span><span class="nx">angleAxis</span><span class="p">(</span><span class="nx">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span>
            <span class="nx">axisZ</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">.</span><span class="nx">angleAxis</span><span class="p">(</span><span class="nx">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="c1">// todo optimize this method. It should basically inline all three multiplications like the code below</span>
        <span class="nx">quat4</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">axisZ</span><span class="p">,</span><span class="nx">axisY</span><span class="p">,</span><span class="nx">dest</span><span class="p">);</span>
        <span class="nx">quat4</span><span class="p">.</span><span class="nx">multiply</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="nx">axisX</span><span class="p">,</span><span class="nx">dest</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="cm">/**</span>
<span class="cm">     * Calculates a 3x3 matrix from the given quat4</span>
<span class="cm">     * @method toMat3</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to create matrix from</span>
<span class="cm">     * @param {KICK.math.mat3} dest Optional, mat3 receiving operation result</span>
<span class="cm">     * @return {KICK.math.mat3} dest if specified, a new mat3 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">toMat3</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat3</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="nx">x2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">y2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">z2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">yy</span> <span class="o">=</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">zz</span> <span class="o">=</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">xy</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">wz</span> <span class="o">=</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">w</span><span class="p">,</span>
            <span class="nx">xz</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">wy</span> <span class="o">=</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">w</span><span class="p">,</span>
            <span class="nx">xx</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">yz</span> <span class="o">=</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">wx</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">w</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">yy</span> <span class="o">-</span> <span class="nx">zz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xy</span> <span class="o">+</span> <span class="nx">wz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xz</span> <span class="o">-</span> <span class="nx">wy</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xy</span> <span class="o">-</span> <span class="nx">wz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">xx</span> <span class="o">-</span> <span class="nx">zz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yz</span> <span class="o">+</span> <span class="nx">wx</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xz</span> <span class="o">+</span> <span class="nx">wy</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yz</span> <span class="o">-</span> <span class="nx">wx</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">xx</span> <span class="o">-</span> <span class="nx">yy</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Calculates a 4x4 matrix from the given quat4</span>
<span class="cm">     * @method toMat4</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to create matrix from</span>
<span class="cm">     * @param {KICK.math.mat4} dest Optional, mat4 receiving operation result</span>
<span class="cm">     * @return {KICK.math.mat4} dest if specified, a new mat4 otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">toMat4</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">mat4</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="nx">x2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">y2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">z2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">yy</span> <span class="o">=</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">zz</span> <span class="o">=</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">xy</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">wz</span> <span class="o">=</span> <span class="nx">z2</span><span class="o">*</span><span class="nx">w</span><span class="p">,</span>
            <span class="nx">xz</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">wy</span> <span class="o">=</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">w</span><span class="p">,</span>
            <span class="nx">xx</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">yz</span> <span class="o">=</span> <span class="nx">y2</span><span class="o">*</span><span class="nx">z</span><span class="p">,</span>
            <span class="nx">wx</span> <span class="o">=</span> <span class="nx">x2</span><span class="o">*</span><span class="nx">w</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">yy</span> <span class="o">-</span> <span class="nx">zz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xy</span> <span class="o">+</span> <span class="nx">wz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xz</span> <span class="o">-</span> <span class="nx">wy</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xy</span> <span class="o">-</span> <span class="nx">wz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">xx</span> <span class="o">-</span> <span class="nx">zz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yz</span> <span class="o">+</span> <span class="nx">wx</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xz</span> <span class="o">+</span> <span class="nx">wy</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yz</span> <span class="o">-</span> <span class="nx">wx</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">xx</span> <span class="o">-</span> <span class="nx">yy</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Performs a spherical linear interpolation between two quat4</span>
<span class="cm">     * @method slerp</span>
<span class="cm">     * @param {KICK.math.quat4} quat first quaternion</span>
<span class="cm">     * @param {KICK.math.quat4} quat2 second quaternion</span>
<span class="cm">     * @param {Number} slerp interpolation amount between the two inputs</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional, quat4 receiving operation result. If not specified result is written to quat</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, quat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">slerp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">quat2</span><span class="p">,</span> <span class="nx">slerp</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">cosHalfTheta</span> <span class="o">=</span>  <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">quat2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">quat2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">quat2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">quat2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">cosHalfTheta</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">dest</span> <span class="o">!=</span> <span class="nx">quat</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
                <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
                <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">halfTheta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">acos</span><span class="p">(</span><span class="nx">cosHalfTheta</span><span class="p">),</span>
            <span class="nx">sinHalfTheta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="nx">cosHalfTheta</span><span class="o">*</span><span class="nx">cosHalfTheta</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sinHalfTheta</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span><span class="p">){</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span><span class="p">);</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span><span class="p">);</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span><span class="p">);</span>
            <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="mf">0.5</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">ratioA</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">slerp</span><span class="p">)</span><span class="o">*</span><span class="nx">halfTheta</span><span class="p">)</span> <span class="o">/</span> <span class="nx">sinHalfTheta</span><span class="p">,</span>
            <span class="nx">ratioB</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">slerp</span><span class="o">*</span><span class="nx">halfTheta</span><span class="p">)</span> <span class="o">/</span> <span class="nx">sinHalfTheta</span><span class="p">;</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioA</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioB</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioA</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioB</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioA</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioB</span><span class="p">);</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioA</span> <span class="o">+</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">ratioB</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="cm">/**</span>
<span class="cm">     * Return rotation that goes from quat to quat2.&lt;br&gt;</span>
<span class="cm">     * It is the same as: quat4.multiply(quat4.inverse(quat),quat2,dest);</span>
<span class="cm">     * @method difference</span>
<span class="cm">     * @param {KICK.math.quat4} quat from rotation</span>
<span class="cm">     * @param {KICK.math.quat4} quat2 to rotation</span>
<span class="cm">     * @param {KICK.math.quat4} dest Optional</span>
<span class="cm">     * @return {KICK.math.quat4} dest if specified, quat otherwise</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">difference</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">,</span> <span class="nx">quat2</span><span class="p">,</span> <span class="nx">dest</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">dest</span><span class="p">)</span> <span class="p">{</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">;</span> <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">qax</span> <span class="o">=</span> <span class="o">-</span><span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">qay</span> <span class="o">=</span> <span class="o">-</span><span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">qaz</span> <span class="o">=</span> <span class="o">-</span><span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">qaw</span> <span class="o">=</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="nx">qbx</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">qby</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">qbz</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">qbw</span> <span class="o">=</span> <span class="nx">quat2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="nx">dest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">+</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qbx</span> <span class="o">+</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qbz</span> <span class="o">-</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qby</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">+</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qby</span> <span class="o">+</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qbx</span> <span class="o">-</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qbz</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">+</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qbz</span> <span class="o">+</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qby</span> <span class="o">-</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qbx</span><span class="p">;</span>
        <span class="nx">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">qaw</span><span class="o">*</span><span class="nx">qbw</span> <span class="o">-</span> <span class="nx">qax</span><span class="o">*</span><span class="nx">qbx</span> <span class="o">-</span> <span class="nx">qay</span><span class="o">*</span><span class="nx">qby</span> <span class="o">-</span> <span class="nx">qaz</span><span class="o">*</span><span class="nx">qbz</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">dest</span><span class="p">;</span>
    <span class="p">};</span>



    <span class="cm">/**</span>
<span class="cm">     * Returns a string representation of a quaternion</span>
<span class="cm">     * @method str</span>
<span class="cm">     * @param {KICK.math.quat4} quat quat4 to represent as a string</span>
<span class="cm">     * @return {String} string representation of quat</span>
<span class="cm">     */</span>
    <span class="nx">quat4</span><span class="p">.</span><span class="nx">str</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">quat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="c1">// glMatrix end</span>

<span class="p">})();</span>
</pre></div>

                    </div>
			</div>
		</div>
		<div class="yui-b">
            <div class="nav">

                    <div id="moduleList" class="module">
                        <h4>Modules</h4>
                        <ul class="content">
                                <li class="selected"><a href="module_kick.html" title="KICK">KICK</a></li>
                        </ul>
                    </div>

                    <div id="classList" class="module">
                        <h4>Classes</h4>
                        <ul class="content">
                                <li class=""><a href="KICK.core.Config.html" title="KICK.core.Config">KICK.core.Config</a></li>
                                <li class=""><a href="KICK.core.Constants.html" title="KICK.core.Constants">KICK.core.Constants</a></li>
                                <li class=""><a href="KICK.core.DefaultResourceProvider.html" title="KICK.core.DefaultResourceProvider">KICK.core.DefaultResourceProvider</a></li>
                                <li class=""><a href="KICK.core.Engine.html" title="KICK.core.Engine">KICK.core.Engine</a></li>
                                <li class=""><a href="KICK.core.KeyInput.html" title="KICK.core.KeyInput">KICK.core.KeyInput</a></li>
                                <li class=""><a href="KICK.core.ResourceManager.html" title="KICK.core.ResourceManager">KICK.core.ResourceManager</a></li>
                                <li class=""><a href="KICK.core.ResourceProvider.html" title="KICK.core.ResourceProvider">KICK.core.ResourceProvider</a></li>
                                <li class=""><a href="KICK.core.Time.html" title="KICK.core.Time">KICK.core.Time</a></li>
                                <li class=""><a href="KICK.core.Util.html" title="KICK.core.Util">KICK.core.Util</a></li>
                                <li class=""><a href="KICK.importer.ColladaImporter.html" title="KICK.importer.ColladaImporter">KICK.importer.ColladaImporter</a></li>
                                <li class=""><a href="KICK.material.GLSLConstants.html" title="KICK.material.GLSLConstants">KICK.material.GLSLConstants</a></li>
                                <li class=""><a href="KICK.material.Material.html" title="KICK.material.Material">KICK.material.Material</a></li>
                                <li class=""><a href="KICK.material.Shader.html" title="KICK.material.Shader">KICK.material.Shader</a></li>
                                <li class=""><a href="KICK.math.mat3.html" title="KICK.math.mat3">KICK.math.mat3</a></li>
                                <li class=""><a href="KICK.math.mat4.html" title="KICK.math.mat4">KICK.math.mat4</a></li>
                                <li class=""><a href="KICK.math.quat4.html" title="KICK.math.quat4">KICK.math.quat4</a></li>
                                <li class=""><a href="KICK.math.vec2.html" title="KICK.math.vec2">KICK.math.vec2</a></li>
                                <li class=""><a href="KICK.math.vec3.html" title="KICK.math.vec3">KICK.math.vec3</a></li>
                                <li class=""><a href="KICK.math.vec4.html" title="KICK.math.vec4">KICK.math.vec4</a></li>
                                <li class=""><a href="KICK.mesh.Mesh.html" title="KICK.mesh.Mesh">KICK.mesh.Mesh</a></li>
                                <li class=""><a href="KICK.mesh.MeshData.html" title="KICK.mesh.MeshData">KICK.mesh.MeshData</a></li>
                                <li class=""><a href="KICK.mesh.MeshFactory.html" title="KICK.mesh.MeshFactory">KICK.mesh.MeshFactory</a></li>
                                <li class=""><a href="KICK.renderer.ForwardRenderer.html" title="KICK.renderer.ForwardRenderer">KICK.renderer.ForwardRenderer</a></li>
                                <li class=""><a href="KICK.renderer.NullRenderer.html" title="KICK.renderer.NullRenderer">KICK.renderer.NullRenderer</a></li>
                                <li class=""><a href="KICK.renderer.Renderer.html" title="KICK.renderer.Renderer">KICK.renderer.Renderer</a></li>
                                <li class=""><a href="KICK.scene.Camera.html" title="KICK.scene.Camera">KICK.scene.Camera</a></li>
                                <li class=""><a href="KICK.scene.Component.html" title="KICK.scene.Component">KICK.scene.Component</a></li>
                                <li class=""><a href="KICK.scene.ComponentChangedListener.html" title="KICK.scene.ComponentChangedListener">KICK.scene.ComponentChangedListener</a></li>
                                <li class=""><a href="KICK.scene.GameObject.html" title="KICK.scene.GameObject">KICK.scene.GameObject</a></li>
                                <li class=""><a href="KICK.scene.Light.html" title="KICK.scene.Light">KICK.scene.Light</a></li>
                                <li class=""><a href="KICK.scene.MeshRenderer.html" title="KICK.scene.MeshRenderer">KICK.scene.MeshRenderer</a></li>
                                <li class=""><a href="KICK.scene.Scene.html" title="KICK.scene.Scene">KICK.scene.Scene</a></li>
                                <li class=""><a href="KICK.scene.SceneLights.html" title="KICK.scene.SceneLights">KICK.scene.SceneLights</a></li>
                                <li class=""><a href="KICK.scene.Transform.html" title="KICK.scene.Transform">KICK.scene.Transform</a></li>
                                <li class=""><a href="KICK.texture.RenderTexture.html" title="KICK.texture.RenderTexture">KICK.texture.RenderTexture</a></li>
                                <li class=""><a href="KICK.texture.Texture.html" title="KICK.texture.Texture">KICK.texture.Texture</a></li>
                        </ul>
                    </div>

                    <div id="fileList" class="module">
                        <h4>Files</h4>
                        <ul class="content">        
                                <li class=""><a href="collada.js.html" title="collada.js">collada.js</a></li>
                                <li class=""><a href="constants.js.html" title="constants.js">constants.js</a></li>
                                <li class=""><a href="core-default.js.html" title="core-default.js">core-default.js</a></li>
                                <li class=""><a href="core.js.html" title="core.js">core.js</a></li>
                                <li class=""><a href="glslconstants.js.html" title="glslconstants.js">glslconstants.js</a></li>
                                <li class=""><a href="material.js.html" title="material.js">material.js</a></li>
                                <li class="selected"><a href="math.js.html" title="math.js">math.js</a></li>
                                <li class=""><a href="mesh.js.html" title="mesh.js">mesh.js</a></li>
                                <li class=""><a href="meshfactory.js.html" title="meshfactory.js">meshfactory.js</a></li>
                                <li class=""><a href="renderer.js.html" title="renderer.js">renderer.js</a></li>
                                <li class=""><a href="scene.js.html" title="scene.js">scene.js</a></li>
                                <li class=""><a href="texture.js.html" title="texture.js">texture.js</a></li>
                        </ul>
                    </div>





            </div>
		</div>
	</div>
	<div id="ft">
        <hr />
        Copyright Morten Nobel-Joergensen 2011 All rights reserved.
	</div>
</div>
<script type="text/javascript">

    var ALL_YUI_PROPS = [{"url": "KICK.scene.Component.html#method_activated", "access": "", "host": "KICK.scene.Component", "type": "method", "name": "activated"}, {"url": "KICK.scene.Camera.html#method_activated", "access": "", "host": "KICK.scene.Camera", "type": "method", "name": "activated"}, {"url": "KICK.scene.MeshRenderer.html#method_activated", "access": "", "host": "KICK.scene.MeshRenderer", "type": "method", "name": "activated"}, {"url": "KICK.material.Shader.html#property_activeAttributes", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "activeAttributes"}, {"url": "KICK.core.Engine.html#property_activeScene", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "activeScene"}, {"url": "KICK.material.Shader.html#property_activeUniforms", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "activeUniforms"}, {"url": "KICK.math.vec2.html#method_add", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "add"}, {"url": "KICK.math.vec3.html#method_add", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "add"}, {"url": "KICK.math.vec4.html#method_add", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "add"}, {"url": "KICK.scene.GameObject.html#method_addComponent", "access": "", "host": "KICK.scene.GameObject", "type": "method", "name": "addComponent"}, {"url": "KICK.scene.Scene.html#method_addComponent", "access": "protected", "host": "KICK.scene.Scene", "type": "method", "name": "addComponent"}, {"url": "KICK.scene.Scene.html#method_addComponentListener", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "addComponentListener"}, {"url": "KICK.core.Engine.html#method_addContextListener", "access": "", "host": "KICK.core.Engine", "type": "method", "name": "addContextListener"}, {"url": "KICK.core.Engine.html#method_addFrameListener", "access": "", "host": "KICK.core.Engine", "type": "method", "name": "addFrameListener"}, {"url": "KICK.core.Config.html#property_alpha", "access": "", "host": "KICK.core.Config", "type": "property", "name": "alpha"}, {"url": "KICK.scene.SceneLights.html#property_ambientLight", "access": "", "host": "KICK.scene.SceneLights", "type": "property", "name": "ambientLight"}, {"url": "KICK.math.quat4.html#method_angleAxis", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "angleAxis"}, {"url": "KICK.core.Config.html#property_antialias", "access": "", "host": "KICK.core.Config", "type": "property", "name": "antialias"}, {"url": "KICK.math.vec2.html#method_array", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "array"}, {"url": "KICK.math.vec3.html#method_array", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "array"}, {"url": "KICK.math.vec4.html#method_array", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "array"}, {"url": "KICK.core.Constants.html#property__ASSERT_EDITOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "_ASSERT_EDITOR"}, {"url": "KICK.core.Time.html#property_avarageFramesPerSecond", "access": "", "host": "KICK.core.Time", "type": "property", "name": "avarageFramesPerSecond"}, {"url": "KICK.material.Shader.html#method_bind", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "bind"}, {"url": "KICK.material.Material.html#method_bind", "access": "", "host": "KICK.material.Material", "type": "method", "name": "bind"}, {"url": "KICK.mesh.Mesh.html#method_bind", "access": "", "host": "KICK.mesh.Mesh", "type": "method", "name": "bind"}, {"url": "KICK.texture.RenderTexture.html#method_bind", "access": "", "host": "KICK.texture.RenderTexture", "type": "method", "name": "bind"}, {"url": "KICK.texture.Texture.html#method_bind", "access": "", "host": "KICK.texture.Texture", "type": "method", "name": "bind"}, {"url": "KICK.material.Shader.html#method_bindUniform", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "bindUniform"}, {"url": "KICK.material.Shader.html#property_blend", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "blend"}, {"url": "KICK.material.Shader.html#property_blendSFactor", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "blendSFactor"}, {"url": "KICK.scene.Camera.html#property_bottom", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "bottom"}, {"url": "KICK.math.quat4.html#method_calculateW", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "calculateW"}, {"url": "KICK.scene.Camera.html#property_cameraIndex", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "cameraIndex"}, {"url": "KICK.scene.Camera.html#property_cameraTypePerspective", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "cameraTypePerspective"}, {"url": "KICK.core.Engine.html#property_canvas", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "canvas"}, {"url": "KICK.core.Engine.html#method_canvasResized", "access": "", "host": "KICK.core.Engine", "type": "method", "name": "canvasResized"}, {"url": "KICK.math.vec3.html#method_cartesianToSpherical", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "cartesianToSpherical"}, {"url": "KICK.core.Config.html#property_checkCanvasResizeInterval", "access": "", "host": "KICK.core.Config", "type": "property", "name": "checkCanvasResizeInterval"}, {"url": "KICK.scene.Transform.html#property_children", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "children"}, {"url": "KICK.scene.Camera.html#property_clearColor", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "clearColor"}, {"url": "KICK.scene.Camera.html#property_clearFlagColor", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "clearFlagColor"}, {"url": "KICK.scene.Camera.html#property_clearFlagDepth", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "clearFlagDepth"}, {"url": "KICK.mesh.MeshData.html#property_color", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "color"}, {"url": "KICK.scene.Light.html#property_color", "access": "", "host": "KICK.scene.Light", "type": "property", "name": "color"}, {"url": "KICK.scene.Light.html#property_colorIntensity", "access": "", "host": "KICK.scene.Light", "type": "property", "name": "colorIntensity"}, {"url": "KICK.texture.RenderTexture.html#property_colorTexture", "access": "", "host": "KICK.texture.RenderTexture", "type": "property", "name": "colorTexture"}, {"url": "KICK.mesh.MeshData.html#method_combine", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "combine"}, {"url": "KICK.scene.ComponentChangedListener.html#method_componentsAdded", "access": "", "host": "KICK.scene.ComponentChangedListener", "type": "method", "name": "componentsAdded"}, {"url": "KICK.scene.ComponentChangedListener.html#method_componentsRemoved", "access": "", "host": "KICK.scene.ComponentChangedListener", "type": "method", "name": "componentsRemoved"}, {"url": "KICK.core.Engine.html#property_config", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "config"}, {"url": "KICK.core.Util.html#method_contains", "access": "", "host": "KICK.core.Util", "type": "method", "name": "contains"}, {"url": "KICK.math.vec2.html#method_create", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "create"}, {"url": "KICK.math.vec3.html#method_create", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "create"}, {"url": "KICK.math.vec4.html#method_create", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "create"}, {"url": "KICK.math.mat3.html#method_create", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "create"}, {"url": "KICK.math.mat4.html#method_create", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "create"}, {"url": "KICK.math.quat4.html#method_create", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "create"}, {"url": "KICK.mesh.MeshFactory.html#method_createCubeData", "access": "", "host": "KICK.mesh.MeshFactory", "type": "method", "name": "createCubeData"}, {"url": "KICK.scene.Scene.html#method_createGameObject", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "createGameObject"}, {"url": "KICK.mesh.MeshFactory.html#method_createPlaneData", "access": "", "host": "KICK.mesh.MeshFactory", "type": "method", "name": "createPlaneData"}, {"url": "KICK.mesh.MeshFactory.html#method_createTriangleData", "access": "", "host": "KICK.mesh.MeshFactory", "type": "method", "name": "createTriangleData"}, {"url": "KICK.core.Engine.html#method_createUID", "access": "", "host": "KICK.core.Engine", "type": "method", "name": "createUID"}, {"url": "KICK.mesh.MeshFactory.html#method_createUVSphereData", "access": "", "host": "KICK.mesh.MeshFactory", "type": "method", "name": "createUVSphereData"}, {"url": "KICK.math.vec3.html#method_cross", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "cross"}, {"url": "KICK.texture.Texture.html#property_dataURI", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "dataURI"}, {"url": "KICK.scene.Component.html#method_deactivated", "access": "", "host": "KICK.scene.Component", "type": "method", "name": "deactivated"}, {"url": "KICK.scene.Camera.html#method_deactivated", "access": "", "host": "KICK.scene.Camera", "type": "method", "name": "deactivated"}, {"url": "KICK.core.Constants.html#property__DEBUG", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "_DEBUG"}, {"url": "KICK.scene.Scene.html#method_debug", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "debug"}, {"url": "KICK.core.Constants.html#property__DEGREE_TO_RADIAN", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "_DEGREE_TO_RADIAN"}, {"url": "KICK.core.Time.html#property_deltaTime", "access": "", "host": "KICK.core.Time", "type": "property", "name": "deltaTime"}, {"url": "KICK.texture.RenderTexture.html#property_depthTexture", "access": "", "host": "KICK.texture.RenderTexture", "type": "property", "name": "depthTexture"}, {"url": "KICK.mesh.MeshData.html#property_description", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "description"}, {"url": "KICK.material.Shader.html#method_destroy", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "destroy"}, {"url": "KICK.mesh.Mesh.html#method_destroy", "access": "", "host": "KICK.mesh.Mesh", "type": "method", "name": "destroy"}, {"url": "KICK.scene.GameObject.html#method_destroy", "access": "", "host": "KICK.scene.GameObject", "type": "method", "name": "destroy"}, {"url": "KICK.texture.Texture.html#method_destroy", "access": "", "host": "KICK.texture.Texture", "type": "method", "name": "destroy"}, {"url": "KICK.scene.Scene.html#method_destroyObject", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "destroyObject"}, {"url": "KICK.math.mat4.html#method_determinant", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "determinant"}, {"url": "KICK.math.quat4.html#method_difference", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "difference"}, {"url": "KICK.texture.RenderTexture.html#property_dimension", "access": "", "host": "KICK.texture.RenderTexture", "type": "property", "name": "dimension"}, {"url": "KICK.texture.Texture.html#property_dimension", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "dimension"}, {"url": "KICK.math.vec3.html#method_direction", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "direction"}, {"url": "KICK.scene.SceneLights.html#property_directionalHalfVector", "access": "", "host": "KICK.scene.SceneLights", "type": "property", "name": "directionalHalfVector"}, {"url": "KICK.scene.SceneLights.html#property_directionalLight", "access": "", "host": "KICK.scene.SceneLights", "type": "property", "name": "directionalLight"}, {"url": "KICK.scene.SceneLights.html#property_directionalLightDirection", "access": "", "host": "KICK.scene.SceneLights", "type": "property", "name": "directionalLightDirection"}, {"url": "KICK.math.vec3.html#method_dot", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "dot"}, {"url": "KICK.core.Config.html#property_enableDebugContext", "access": "", "host": "KICK.core.Config", "type": "property", "name": "enableDebugContext"}, {"url": "KICK.material.Shader.html#property_engine", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "engine"}, {"url": "KICK.scene.GameObject.html#property_engine", "access": "", "host": "KICK.scene.GameObject", "type": "property", "name": "engine"}, {"url": "KICK.scene.Scene.html#property_engine", "access": "", "host": "KICK.scene.Scene", "type": "property", "name": "engine"}, {"url": "KICK.core.Constants.html#property__EPSILON", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "_EPSILON"}, {"url": "KICK.material.GLSLConstants.html#property_error_fs.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "error_fs.glsl"}, {"url": "KICK.material.Shader.html#property_errorLog", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "errorLog"}, {"url": "KICK.material.GLSLConstants.html#property_error_vs.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "error_vs.glsl"}, {"url": "KICK.material.Shader.html#property_faceCulling", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "faceCulling"}, {"url": "KICK.core.Util.html#method_fail", "access": "", "host": "KICK.core.Util", "type": "method", "name": "fail"}, {"url": "KICK.scene.Camera.html#property_far", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "far"}, {"url": "KICK.scene.Camera.html#property_fieldOfView", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "fieldOfView"}, {"url": "KICK.scene.Scene.html#method_findComponentsOfType", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "findComponentsOfType"}, {"url": "KICK.texture.Texture.html#property_flipY", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "flipY"}, {"url": "KICK.material.Shader.html#property_fragmentShaderSrc", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "fragmentShaderSrc"}, {"url": "KICK.core.Time.html#property_frameCount", "access": "", "host": "KICK.core.Time", "type": "property", "name": "frameCount"}, {"url": "KICK.math.mat4.html#method_frustum", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "frustum"}, {"url": "KICK.scene.Component.html#property_gameObject", "access": "", "host": "KICK.scene.Component", "type": "property", "name": "gameObject"}, {"url": "KICK.texture.Texture.html#property_generateMipmaps", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "generateMipmaps"}, {"url": "KICK.material.Shader.html#method_getBlendKey", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "getBlendKey"}, {"url": "KICK.scene.GameObject.html#method_getComponent", "access": "", "host": "KICK.scene.GameObject", "type": "method", "name": "getComponent"}, {"url": "KICK.scene.GameObject.html#method_getComponentOfType", "access": "", "host": "KICK.scene.GameObject", "type": "method", "name": "getComponentOfType"}, {"url": "KICK.scene.GameObject.html#method_getComponentsOfType", "access": "", "host": "KICK.scene.GameObject", "type": "method", "name": "getComponentsOfType"}, {"url": "KICK.scene.Scene.html#method_getGameObject", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "getGameObject"}, {"url": "KICK.scene.Transform.html#method_getGlobalMatrix", "access": "", "host": "KICK.scene.Transform", "type": "method", "name": "getGlobalMatrix"}, {"url": "KICK.scene.Transform.html#method_getGlobalTRSInverse", "access": "", "host": "KICK.scene.Transform", "type": "method", "name": "getGlobalTRSInverse"}, {"url": "KICK.scene.Transform.html#method_getLocalMatrix", "access": "", "host": "KICK.scene.Transform", "type": "method", "name": "getLocalMatrix"}, {"url": "KICK.scene.Transform.html#method_getLocalTRSInverse", "access": "", "host": "KICK.scene.Transform", "type": "method", "name": "getLocalTRSInverse"}, {"url": "KICK.core.DefaultResourceProvider.html#method_getMesh", "access": "", "host": "KICK.core.DefaultResourceProvider", "type": "method", "name": "getMesh"}, {"url": "KICK.core.ResourceProvider.html#method_getMesh", "access": "", "host": "KICK.core.ResourceProvider", "type": "method", "name": "getMesh"}, {"url": "KICK.core.ResourceManager.html#method_getMesh", "access": "", "host": "KICK.core.ResourceManager", "type": "method", "name": "getMesh"}, {"url": "KICK.scene.Scene.html#method_getNumberOfGameObjects", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "getNumberOfGameObjects"}, {"url": "KICK.core.Util.html#method_getParameter", "access": "", "host": "KICK.core.Util", "type": "method", "name": "getParameter"}, {"url": "KICK.core.Util.html#method_getParameterInt", "access": "", "host": "KICK.core.Util", "type": "method", "name": "getParameterInt"}, {"url": "KICK.material.Shader.html#method_getPrecompiledSource", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "getPrecompiledSource"}, {"url": "KICK.core.DefaultResourceProvider.html#method_getScene", "access": "", "host": "KICK.core.DefaultResourceProvider", "type": "method", "name": "getScene"}, {"url": "KICK.core.ResourceProvider.html#method_getScene", "access": "", "host": "KICK.core.ResourceProvider", "type": "method", "name": "getScene"}, {"url": "KICK.core.ResourceManager.html#method_getScene", "access": "", "host": "KICK.core.ResourceManager", "type": "method", "name": "getScene"}, {"url": "KICK.core.DefaultResourceProvider.html#method_getShader", "access": "", "host": "KICK.core.DefaultResourceProvider", "type": "method", "name": "getShader"}, {"url": "KICK.core.ResourceProvider.html#method_getShader", "access": "", "host": "KICK.core.ResourceProvider", "type": "method", "name": "getShader"}, {"url": "KICK.core.ResourceManager.html#method_getShader", "access": "", "host": "KICK.core.ResourceManager", "type": "method", "name": "getShader"}, {"url": "KICK.core.DefaultResourceProvider.html#method_getTexture", "access": "", "host": "KICK.core.DefaultResourceProvider", "type": "method", "name": "getTexture"}, {"url": "KICK.core.ResourceProvider.html#method_getTexture", "access": "", "host": "KICK.core.ResourceProvider", "type": "method", "name": "getTexture"}, {"url": "KICK.core.ResourceManager.html#method_getTexture", "access": "", "host": "KICK.core.ResourceManager", "type": "method", "name": "getTexture"}, {"url": "KICK.core.Engine.html#property_gl", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "gl"}, {"url": "KICK.material.Shader.html#property_gl", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "gl"}, {"url": "KICK.core.Constants.html#property_GL_ACTIVE_ATTRIBUTES", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ACTIVE_ATTRIBUTES"}, {"url": "KICK.core.Constants.html#property_GL_ACTIVE_TEXTURE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ACTIVE_TEXTURE"}, {"url": "KICK.core.Constants.html#property_GL_ACTIVE_UNIFORMS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ACTIVE_UNIFORMS"}, {"url": "KICK.core.Constants.html#property_GL_ALIASED_LINE_WIDTH_RANGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ALIASED_LINE_WIDTH_RANGE"}, {"url": "KICK.core.Constants.html#property_GL_ALIASED_POINT_SIZE_RANGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ALIASED_POINT_SIZE_RANGE"}, {"url": "KICK.core.Constants.html#property_GL_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_ALPHA_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ALPHA_BITS"}, {"url": "KICK.core.Constants.html#property_GL_ALWAYS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ALWAYS"}, {"url": "KICK.core.Constants.html#property_GL_ARRAY_BUFFER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ARRAY_BUFFER"}, {"url": "KICK.core.Constants.html#property_GL_ARRAY_BUFFER_BINDING", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ARRAY_BUFFER_BINDING"}, {"url": "KICK.core.Constants.html#property_GL_ATTACHED_SHADERS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ATTACHED_SHADERS"}, {"url": "KICK.core.Constants.html#property_GL_BACK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BACK"}, {"url": "KICK.core.Constants.html#property_GL_BLEND", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_DST_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_DST_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_DST_RGB", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_DST_RGB"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_EQUATION", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_EQUATION"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_EQUATION_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_EQUATION_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_EQUATION_RGB", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_EQUATION_RGB"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_SRC_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_SRC_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_BLEND_SRC_RGB", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLEND_SRC_RGB"}, {"url": "KICK.core.Constants.html#property_GL_BLUE_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BLUE_BITS"}, {"url": "KICK.core.Constants.html#property_GL_BOOL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BOOL"}, {"url": "KICK.core.Constants.html#property_GL_BOOL_VEC2", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BOOL_VEC2"}, {"url": "KICK.core.Constants.html#property_GL_BOOL_VEC3", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BOOL_VEC3"}, {"url": "KICK.core.Constants.html#property_GL_BOOL_VEC4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BOOL_VEC4"}, {"url": "KICK.core.Constants.html#property_GL_BROWSER_DEFAULT_WEBGL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BROWSER_DEFAULT_WEBGL"}, {"url": "KICK.core.Constants.html#property_GL_BUFFER_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BUFFER_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_BUFFER_USAGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BUFFER_USAGE"}, {"url": "KICK.core.Constants.html#property_GL_BYTE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_BYTE"}, {"url": "KICK.core.Constants.html#property_GL_CCW", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CCW"}, {"url": "KICK.core.Constants.html#property_GL_CLAMP_TO_EDGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CLAMP_TO_EDGE"}, {"url": "KICK.core.Constants.html#property_GL_COLOR_ATTACHMENT0", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_COLOR_ATTACHMENT0"}, {"url": "KICK.core.Constants.html#property_GL_COLOR_BUFFER_BIT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_COLOR_BUFFER_BIT"}, {"url": "KICK.core.Constants.html#property_GL_COLOR_CLEAR_VALUE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_COLOR_CLEAR_VALUE"}, {"url": "KICK.core.Constants.html#property_GL_COLOR_WRITEMASK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_COLOR_WRITEMASK"}, {"url": "KICK.core.Constants.html#property_GL_COMPILE_STATUS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_COMPILE_STATUS"}, {"url": "KICK.core.Constants.html#property_GL_COMPRESSED_TEXTURE_FORMATS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_COMPRESSED_TEXTURE_FORMATS"}, {"url": "KICK.core.Constants.html#property_GL_CONSTANT_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CONSTANT_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_CONSTANT_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CONSTANT_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_CONTEXT_LOST_WEBGL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CONTEXT_LOST_WEBGL"}, {"url": "KICK.core.Constants.html#property_GL_CULL_FACE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CULL_FACE"}, {"url": "KICK.core.Constants.html#property_GL_CULL_FACE_MODE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CULL_FACE_MODE"}, {"url": "KICK.core.Constants.html#property_GL_CURRENT_PROGRAM", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CURRENT_PROGRAM"}, {"url": "KICK.core.Constants.html#property_GL_CURRENT_VERTEX_ATTRIB", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CURRENT_VERTEX_ATTRIB"}, {"url": "KICK.core.Constants.html#property_GL_CW", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_CW"}, {"url": "KICK.core.Constants.html#property_GL_DECR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DECR"}, {"url": "KICK.core.Constants.html#property_GL_DECR_WRAP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DECR_WRAP"}, {"url": "KICK.core.Constants.html#property_GL_DELETE_STATUS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DELETE_STATUS"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_ATTACHMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_ATTACHMENT"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_BITS"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_BUFFER_BIT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_BUFFER_BIT"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_CLEAR_VALUE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_CLEAR_VALUE"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_COMPONENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_COMPONENT"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_COMPONENT16", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_COMPONENT16"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_FUNC", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_FUNC"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_RANGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_RANGE"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_STENCIL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_STENCIL"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_STENCIL_ATTACHMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_STENCIL_ATTACHMENT"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_TEST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_TEST"}, {"url": "KICK.core.Constants.html#property_GL_DEPTH_WRITEMASK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DEPTH_WRITEMASK"}, {"url": "KICK.core.Constants.html#property_GL_DITHER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DITHER"}, {"url": "KICK.core.Constants.html#property_GL_DONT_CARE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DONT_CARE"}, {"url": "KICK.core.Constants.html#property_GL_DST_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DST_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_DST_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DST_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_DYNAMIC_DRAW", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_DYNAMIC_DRAW"}, {"url": "KICK.core.Constants.html#property_GL_ELEMENT_ARRAY_BUFFER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ELEMENT_ARRAY_BUFFER"}, {"url": "KICK.core.Constants.html#property_GL_ELEMENT_ARRAY_BUFFER_BINDING", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ELEMENT_ARRAY_BUFFER_BINDING"}, {"url": "KICK.core.Constants.html#property_GL_EQUAL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_EQUAL"}, {"url": "KICK.core.Constants.html#property_GL_FASTEST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FASTEST"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT_MAT2", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT_MAT2"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT_MAT3", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT_MAT3"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT_MAT4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT_MAT4"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT_VEC2", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT_VEC2"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT_VEC3", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT_VEC3"}, {"url": "KICK.core.Constants.html#property_GL_FLOAT_VEC4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FLOAT_VEC4"}, {"url": "KICK.core.Constants.html#property_GL_FRAGMENT_SHADER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAGMENT_SHADER"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_BINDING", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_BINDING"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_COMPLETE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_COMPLETE"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"}, {"url": "KICK.core.Constants.html#property_GL_FRAMEBUFFER_UNSUPPORTED", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRAMEBUFFER_UNSUPPORTED"}, {"url": "KICK.core.Constants.html#property_GL_FRONT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRONT"}, {"url": "KICK.core.Constants.html#property_GL_FRONT_AND_BACK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRONT_AND_BACK"}, {"url": "KICK.core.Constants.html#property_GL_FRONT_FACE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FRONT_FACE"}, {"url": "KICK.core.Constants.html#property_GL_FUNC_ADD", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FUNC_ADD"}, {"url": "KICK.core.Constants.html#property_GL_FUNC_REVERSE_SUBTRACT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FUNC_REVERSE_SUBTRACT"}, {"url": "KICK.core.Constants.html#property_GL_FUNC_SUBTRACT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_FUNC_SUBTRACT"}, {"url": "KICK.core.Constants.html#property_GL_GENERATE_MIPMAP_HINT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_GENERATE_MIPMAP_HINT"}, {"url": "KICK.core.Constants.html#property_GL_GEQUAL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_GEQUAL"}, {"url": "KICK.core.Constants.html#property_GL_GREATER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_GREATER"}, {"url": "KICK.core.Constants.html#property_GL_GREEN_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_GREEN_BITS"}, {"url": "KICK.core.Constants.html#property_GL_HIGH_FLOAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_HIGH_FLOAT"}, {"url": "KICK.core.Constants.html#property_GL_HIGH_INT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_HIGH_INT"}, {"url": "KICK.core.Constants.html#property_GL_INCR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INCR"}, {"url": "KICK.core.Constants.html#property_GL_INCR_WRAP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INCR_WRAP"}, {"url": "KICK.core.Constants.html#property_GL_INT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INT"}, {"url": "KICK.core.Constants.html#property_GL_INT_VEC2", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INT_VEC2"}, {"url": "KICK.core.Constants.html#property_GL_INT_VEC3", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INT_VEC3"}, {"url": "KICK.core.Constants.html#property_GL_INT_VEC4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INT_VEC4"}, {"url": "KICK.core.Constants.html#property_GL_INVALID_ENUM", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INVALID_ENUM"}, {"url": "KICK.core.Constants.html#property_GL_INVALID_FRAMEBUFFER_OPERATION", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INVALID_FRAMEBUFFER_OPERATION"}, {"url": "KICK.core.Constants.html#property_GL_INVALID_OPERATION", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INVALID_OPERATION"}, {"url": "KICK.core.Constants.html#property_GL_INVALID_VALUE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INVALID_VALUE"}, {"url": "KICK.core.Constants.html#property_GL_INVERT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_INVERT"}, {"url": "KICK.core.Constants.html#property_GL_KEEP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_KEEP"}, {"url": "KICK.core.Constants.html#property_GL_LEQUAL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LEQUAL"}, {"url": "KICK.core.Constants.html#property_GL_LESS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LESS"}, {"url": "KICK.core.Constants.html#property_GL_LINEAR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINEAR"}, {"url": "KICK.core.Constants.html#property_GL_LINEAR_MIPMAP_LINEAR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINEAR_MIPMAP_LINEAR"}, {"url": "KICK.core.Constants.html#property_GL_LINEAR_MIPMAP_NEAREST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINEAR_MIPMAP_NEAREST"}, {"url": "KICK.core.Constants.html#property_GL_LINE_LOOP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINE_LOOP"}, {"url": "KICK.core.Constants.html#property_GL_LINES", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINES"}, {"url": "KICK.core.Constants.html#property_GL_LINE_STRIP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINE_STRIP"}, {"url": "KICK.core.Constants.html#property_GL_LINE_WIDTH", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINE_WIDTH"}, {"url": "KICK.core.Constants.html#property_GL_LINK_STATUS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LINK_STATUS"}, {"url": "KICK.core.Constants.html#property_GL_LOW_FLOAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LOW_FLOAT"}, {"url": "KICK.core.Constants.html#property_GL_LOW_INT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LOW_INT"}, {"url": "KICK.core.Constants.html#property_GL_LUMINANCE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LUMINANCE"}, {"url": "KICK.core.Constants.html#property_GL_LUMINANCE_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_LUMINANCE_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_CUBE_MAP_TEXTURE_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_CUBE_MAP_TEXTURE_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_MAX_FRAGMENT_UNIFORM_VECTORS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_FRAGMENT_UNIFORM_VECTORS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_RENDERBUFFER_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_RENDERBUFFER_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_MAX_TEXTURE_IMAGE_UNITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_TEXTURE_IMAGE_UNITS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_TEXTURE_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_TEXTURE_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_MAX_VARYING_VECTORS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_VARYING_VECTORS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_VERTEX_ATTRIBS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_VERTEX_ATTRIBS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_VERTEX_UNIFORM_VECTORS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_VERTEX_UNIFORM_VECTORS"}, {"url": "KICK.core.Constants.html#property_GL_MAX_VIEWPORT_DIMS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MAX_VIEWPORT_DIMS"}, {"url": "KICK.core.Constants.html#property_GL_MEDIUM_FLOAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MEDIUM_FLOAT"}, {"url": "KICK.core.Constants.html#property_GL_MEDIUM_INT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MEDIUM_INT"}, {"url": "KICK.core.Constants.html#property_GL_MIRRORED_REPEAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_MIRRORED_REPEAT"}, {"url": "KICK.core.Constants.html#property_GL_NEAREST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NEAREST"}, {"url": "KICK.core.Constants.html#property_GL_NEAREST_MIPMAP_LINEAR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NEAREST_MIPMAP_LINEAR"}, {"url": "KICK.core.Constants.html#property_GL_NEAREST_MIPMAP_NEAREST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NEAREST_MIPMAP_NEAREST"}, {"url": "KICK.core.Constants.html#property_GL_NEVER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NEVER"}, {"url": "KICK.core.Constants.html#property_GL_NICEST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NICEST"}, {"url": "KICK.core.Constants.html#property_GL_NO_ERROR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NO_ERROR"}, {"url": "KICK.core.Constants.html#property_GL_NONE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NONE"}, {"url": "KICK.core.Constants.html#property_GL_NOTEQUAL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NOTEQUAL"}, {"url": "KICK.core.Constants.html#property_GL_NUM_COMPRESSED_TEXTURE_FORMATS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_NUM_COMPRESSED_TEXTURE_FORMATS"}, {"url": "KICK.core.Constants.html#property_GL_ONE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE"}, {"url": "KICK.core.Constants.html#property_GL_ONE_MINUS_CONSTANT_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE_MINUS_CONSTANT_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_ONE_MINUS_CONSTANT_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE_MINUS_CONSTANT_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_ONE_MINUS_DST_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE_MINUS_DST_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_ONE_MINUS_DST_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE_MINUS_DST_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_ONE_MINUS_SRC_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE_MINUS_SRC_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_ONE_MINUS_SRC_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ONE_MINUS_SRC_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_OUT_OF_MEMORY", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_OUT_OF_MEMORY"}, {"url": "KICK.core.Constants.html#property_GL_PACK_ALIGNMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_PACK_ALIGNMENT"}, {"url": "KICK.core.Constants.html#property_GL_POINTS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_POINTS"}, {"url": "KICK.core.Constants.html#property_GL_POLYGON_OFFSET_FACTOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_POLYGON_OFFSET_FACTOR"}, {"url": "KICK.core.Constants.html#property_GL_POLYGON_OFFSET_FILL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_POLYGON_OFFSET_FILL"}, {"url": "KICK.core.Constants.html#property_GL_POLYGON_OFFSET_UNITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_POLYGON_OFFSET_UNITS"}, {"url": "KICK.core.Constants.html#property_GL_RED_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RED_BITS"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_ALPHA_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_ALPHA_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_BINDING", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_BINDING"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_BLUE_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_BLUE_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_DEPTH_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_DEPTH_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_GREEN_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_GREEN_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_HEIGHT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_HEIGHT"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_INTERNAL_FORMAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_INTERNAL_FORMAT"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_RED_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_RED_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_STENCIL_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_STENCIL_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_RENDERBUFFER_WIDTH", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERBUFFER_WIDTH"}, {"url": "KICK.core.Constants.html#property_GL_RENDERER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RENDERER"}, {"url": "KICK.core.Constants.html#property_GL_REPEAT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_REPEAT"}, {"url": "KICK.core.Constants.html#property_GL_REPLACE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_REPLACE"}, {"url": "KICK.core.Constants.html#property_GL_RGB", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RGB"}, {"url": "KICK.core.Constants.html#property_GL_RGB565", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RGB565"}, {"url": "KICK.core.Constants.html#property_GL_RGB5_A1", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RGB5_A1"}, {"url": "KICK.core.Constants.html#property_GL_RGBA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RGBA"}, {"url": "KICK.core.Constants.html#property_GL_RGBA4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_RGBA4"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLE_ALPHA_TO_COVERAGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLE_ALPHA_TO_COVERAGE"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLE_BUFFERS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLE_BUFFERS"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLE_COVERAGE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLE_COVERAGE"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLE_COVERAGE_INVERT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLE_COVERAGE_INVERT"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLE_COVERAGE_VALUE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLE_COVERAGE_VALUE"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLER_2D", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLER_2D"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLER_CUBE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLER_CUBE"}, {"url": "KICK.core.Constants.html#property_GL_SAMPLES", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SAMPLES"}, {"url": "KICK.core.Constants.html#property_GL_SCISSOR_BOX", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SCISSOR_BOX"}, {"url": "KICK.core.Constants.html#property_GL_SCISSOR_TEST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SCISSOR_TEST"}, {"url": "KICK.core.Constants.html#property_GL_SHADER_COMPILER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SHADER_COMPILER"}, {"url": "KICK.core.Constants.html#property_GL_SHADER_TYPE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SHADER_TYPE"}, {"url": "KICK.core.Constants.html#property_GL_SHADING_LANGUAGE_VERSION", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SHADING_LANGUAGE_VERSION"}, {"url": "KICK.core.Constants.html#property_GL_SHORT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SHORT"}, {"url": "KICK.core.Constants.html#property_GL_SRC_ALPHA", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SRC_ALPHA"}, {"url": "KICK.core.Constants.html#property_GL_SRC_ALPHA_SATURATE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SRC_ALPHA_SATURATE"}, {"url": "KICK.core.Constants.html#property_GL_SRC_COLOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SRC_COLOR"}, {"url": "KICK.core.Constants.html#property_GL_STATIC_DRAW", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STATIC_DRAW"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_ATTACHMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_ATTACHMENT"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_FAIL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_FAIL"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_FUNC", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_FUNC"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_PASS_DEPTH_FAIL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_PASS_DEPTH_FAIL"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_PASS_DEPTH_PASS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_PASS_DEPTH_PASS"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_REF", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_REF"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_VALUE_MASK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_VALUE_MASK"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BACK_WRITEMASK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BACK_WRITEMASK"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BITS"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_BUFFER_BIT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_BUFFER_BIT"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_CLEAR_VALUE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_CLEAR_VALUE"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_FAIL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_FAIL"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_FUNC", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_FUNC"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_INDEX", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_INDEX"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_INDEX8", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_INDEX8"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_PASS_DEPTH_FAIL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_PASS_DEPTH_FAIL"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_PASS_DEPTH_PASS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_PASS_DEPTH_PASS"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_REF", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_REF"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_TEST", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_TEST"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_VALUE_MASK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_VALUE_MASK"}, {"url": "KICK.core.Constants.html#property_GL_STENCIL_WRITEMASK", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STENCIL_WRITEMASK"}, {"url": "KICK.core.Constants.html#property_GL_STREAM_DRAW", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_STREAM_DRAW"}, {"url": "KICK.core.Constants.html#property_GL_SUBPIXEL_BITS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_SUBPIXEL_BITS"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE0", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE0"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE1", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE1"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE10", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE10"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE11", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE11"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE12", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE12"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE13", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE13"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE14", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE14"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE15", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE15"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE16", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE16"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE17", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE17"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE18", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE18"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE19", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE19"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE2", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE2"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE20", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE20"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE21", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE21"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE22", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE22"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE23", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE23"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE24", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE24"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE25", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE25"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE26", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE26"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE27", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE27"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE28", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE28"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE29", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE29"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_2D", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_2D"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE3", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE3"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE30", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE30"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE31", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE31"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE4"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE5", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE5"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE6", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE6"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE7", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE7"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE8", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE8"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE9", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE9"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_BINDING_2D", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_BINDING_2D"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_BINDING_CUBE_MAP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_BINDING_CUBE_MAP"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP_NEGATIVE_X", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP_NEGATIVE_X"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP_NEGATIVE_Y", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP_NEGATIVE_Y"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP_NEGATIVE_Z", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP_NEGATIVE_Z"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP_POSITIVE_X", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP_POSITIVE_X"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP_POSITIVE_Y", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP_POSITIVE_Y"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_CUBE_MAP_POSITIVE_Z", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_CUBE_MAP_POSITIVE_Z"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_MAG_FILTER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_MAG_FILTER"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_MIN_FILTER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_MIN_FILTER"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_WRAP_S", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_WRAP_S"}, {"url": "KICK.core.Constants.html#property_GL_TEXTURE_WRAP_T", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TEXTURE_WRAP_T"}, {"url": "KICK.core.Constants.html#property_GL_TRIANGLE_FAN", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TRIANGLE_FAN"}, {"url": "KICK.core.Constants.html#property_GL_TRIANGLES", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TRIANGLES"}, {"url": "KICK.core.Constants.html#property_GL_TRIANGLE_STRIP", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_TRIANGLE_STRIP"}, {"url": "KICK.core.Constants.html#property_GL_UNPACK_ALIGNMENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNPACK_ALIGNMENT"}, {"url": "KICK.core.Constants.html#property_GL_UNPACK_COLORSPACE_CONVERSION_WEBGL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNPACK_COLORSPACE_CONVERSION_WEBGL"}, {"url": "KICK.core.Constants.html#property_GL_UNPACK_FLIP_Y_WEBGL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNPACK_FLIP_Y_WEBGL"}, {"url": "KICK.core.Constants.html#property_GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL"}, {"url": "KICK.core.Constants.html#property_GL_UNSIGNED_BYTE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNSIGNED_BYTE"}, {"url": "KICK.core.Constants.html#property_GL_UNSIGNED_INT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNSIGNED_INT"}, {"url": "KICK.core.Constants.html#property_GL_UNSIGNED_SHORT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNSIGNED_SHORT"}, {"url": "KICK.core.Constants.html#property_GL_UNSIGNED_SHORT_4_4_4_4", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNSIGNED_SHORT_4_4_4_4"}, {"url": "KICK.core.Constants.html#property_GL_UNSIGNED_SHORT_5_5_5_1", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNSIGNED_SHORT_5_5_5_1"}, {"url": "KICK.core.Constants.html#property_GL_UNSIGNED_SHORT_5_6_5", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_UNSIGNED_SHORT_5_6_5"}, {"url": "KICK.core.Constants.html#property_GL_VALIDATE_STATUS", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VALIDATE_STATUS"}, {"url": "KICK.core.Constants.html#property_GL_VENDOR", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VENDOR"}, {"url": "KICK.core.Constants.html#property_GL_VERSION", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERSION"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_ENABLED", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_ENABLED"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_NORMALIZED", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_NORMALIZED"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_POINTER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_POINTER"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_SIZE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_SIZE"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_STRIDE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_STRIDE"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_ATTRIB_ARRAY_TYPE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_ATTRIB_ARRAY_TYPE"}, {"url": "KICK.core.Constants.html#property_GL_VERTEX_SHADER", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VERTEX_SHADER"}, {"url": "KICK.core.Constants.html#property_GL_VIEWPORT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_VIEWPORT"}, {"url": "KICK.core.Constants.html#property_GL_ZERO", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "GL_ZERO"}, {"url": "KICK.math.mat3.html#method_identity", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "identity"}, {"url": "KICK.math.mat4.html#method_identity", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "identity"}, {"url": "KICK.math.quat4.html#method_identity", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "identity"}, {"url": "KICK.mesh.MeshData.html#property_indices", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "indices"}, {"url": "KICK.core.Util.html#method_insertSorted", "access": "", "host": "KICK.core.Util", "type": "method", "name": "insertSorted"}, {"url": "KICK.mesh.MeshData.html#property_int1", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "int1"}, {"url": "KICK.mesh.MeshData.html#property_int2", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "int2"}, {"url": "KICK.mesh.MeshData.html#property_int3", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "int3"}, {"url": "KICK.mesh.MeshData.html#property_int4", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "int4"}, {"url": "KICK.scene.Light.html#property_intensity", "access": "", "host": "KICK.scene.Light", "type": "property", "name": "intensity"}, {"url": "KICK.mesh.MeshData.html#property_interleavedArray", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "interleavedArray"}, {"url": "KICK.texture.Texture.html#property_internalFormat", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "internalFormat"}, {"url": "KICK.math.mat4.html#method_inverse", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "inverse"}, {"url": "KICK.math.quat4.html#method_inverse", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "inverse"}, {"url": "KICK.scene.ComponentChangedListener.html#method_isComponentListener", "access": "", "host": "KICK.scene.ComponentChangedListener", "type": "method", "name": "isComponentListener"}, {"url": "KICK.mesh.MeshData.html#method_isInterleavedDataInitialized", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "isInterleavedDataInitialized"}, {"url": "KICK.core.KeyInput.html#method_isKey", "access": "", "host": "KICK.core.KeyInput", "type": "method", "name": "isKey"}, {"url": "KICK.core.KeyInput.html#method_isKeyDown", "access": "", "host": "KICK.core.KeyInput", "type": "method", "name": "isKeyDown"}, {"url": "KICK.core.KeyInput.html#method_isKeyUp", "access": "", "host": "KICK.core.KeyInput", "type": "method", "name": "isKeyUp"}, {"url": "KICK.material.Shader.html#method_isValid", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "isValid"}, {"url": "KICK.mesh.MeshData.html#method_isValid", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "isValid"}, {"url": "KICK.mesh.MeshData.html#method_isVertexDataInitialized", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "isVertexDataInitialized"}, {"url": "KICK.core.Engine.html#property_keyInput", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "keyInput"}, {"url": "KICK.scene.Component.html#method_lateUpdate", "access": "", "host": "KICK.scene.Component", "type": "method", "name": "lateUpdate"}, {"url": "KICK.scene.GameObject.html#property_layer", "access": "", "host": "KICK.scene.GameObject", "type": "property", "name": "layer"}, {"url": "KICK.scene.Camera.html#property_layerMask", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "layerMask"}, {"url": "KICK.scene.Camera.html#property_left", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "left"}, {"url": "KICK.math.vec3.html#method_length", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "length"}, {"url": "KICK.math.vec4.html#method_length", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "length"}, {"url": "KICK.math.quat4.html#method_length", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "length"}, {"url": "KICK.math.vec3.html#method_lengthSqr", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "lengthSqr"}, {"url": "KICK.math.vec3.html#method_lerp", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "lerp"}, {"url": "KICK.material.GLSLConstants.html#property_light.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "light.glsl"}, {"url": "KICK.core.Constants.html#property__LIGHT_TYPE_AMBIENT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "_LIGHT_TYPE_AMBIENT"}, {"url": "KICK.core.Constants.html#property_LIGHT_TYPE_DIRECTIONAL", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "LIGHT_TYPE_DIRECTIONAL"}, {"url": "KICK.importer.ColladaImporter.html#method_loadCollada", "access": "", "host": "KICK.importer.ColladaImporter", "type": "method", "name": "loadCollada"}, {"url": "KICK.scene.Scene.html#method_loadScene", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "loadScene"}, {"url": "KICK.scene.Transform.html#property_localPosition", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "localPosition"}, {"url": "KICK.scene.Transform.html#property_localRotation", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "localRotation"}, {"url": "KICK.scene.Transform.html#property_localRotationEuler", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "localRotationEuler"}, {"url": "KICK.scene.Transform.html#property_localScale", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "localScale"}, {"url": "KICK.math.mat4.html#method_lookAt", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "lookAt"}, {"url": "KICK.material.Shader.html#property_lookupAttribute", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "lookupAttribute"}, {"url": "KICK.texture.Texture.html#property_magFilter", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "magFilter"}, {"url": "KICK.scene.MeshRenderer.html#property_material", "access": "", "host": "KICK.scene.MeshRenderer", "type": "property", "name": "material"}, {"url": "KICK.core.Config.html#property_maxNumerOfLights", "access": "", "host": "KICK.core.Config", "type": "property", "name": "maxNumerOfLights"}, {"url": "KICK.scene.MeshRenderer.html#property_mesh", "access": "", "host": "KICK.scene.MeshRenderer", "type": "property", "name": "mesh"}, {"url": "KICK.mesh.Mesh.html#property_meshData", "access": "", "host": "KICK.mesh.Mesh", "type": "property", "name": "meshData"}, {"url": "KICK.mesh.MeshData.html#property_meshType", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "meshType"}, {"url": "KICK.texture.Texture.html#property_minFilter", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "minFilter"}, {"url": "KICK.math.vec3.html#method_multiply", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "multiply"}, {"url": "KICK.math.vec4.html#method_multiply", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "multiply"}, {"url": "KICK.math.mat4.html#method_multiply", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "multiply"}, {"url": "KICK.math.quat4.html#method_multiply", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "multiply"}, {"url": "KICK.math.mat4.html#method_multiplyVec3", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "multiplyVec3"}, {"url": "KICK.math.quat4.html#method_multiplyVec3", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "multiplyVec3"}, {"url": "KICK.math.mat4.html#method_multiplyVec3Vector", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "multiplyVec3Vector"}, {"url": "KICK.math.mat4.html#method_multiplyVec4", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "multiplyVec4"}, {"url": "KICK.material.Material.html#property_name", "access": "", "host": "KICK.material.Material", "type": "property", "name": "name"}, {"url": "KICK.mesh.MeshData.html#property_name", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "name"}, {"url": "KICK.mesh.Mesh.html#property_name", "access": "", "host": "KICK.mesh.Mesh", "type": "property", "name": "name"}, {"url": "KICK.scene.Camera.html#property_near", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "near"}, {"url": "KICK.math.vec3.html#method_negate", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "negate"}, {"url": "KICK.math.vec4.html#method_negate", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "negate"}, {"url": "KICK.mesh.MeshData.html#property_normal", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "normal"}, {"url": "KICK.math.vec2.html#method_normalize", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "normalize"}, {"url": "KICK.math.vec3.html#method_normalize", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "normalize"}, {"url": "KICK.math.quat4.html#method_normalize", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "normalize"}, {"url": "KICK.scene.Camera.html#property_normalizedViewportRect", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "normalizedViewportRect"}, {"url": "KICK.scene.GameObject.html#property_numberOfComponents", "access": "", "host": "KICK.scene.GameObject", "type": "property", "name": "numberOfComponents"}, {"url": "KICK.core.Util.html#method_numberSortFunction", "access": "", "host": "KICK.core.Util", "type": "method", "name": "numberSortFunction"}, {"url": "KICK.math.mat4.html#method_ortho", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "ortho"}, {"url": "KICK.scene.SceneLights.html#property_otherLights", "access": "", "host": "KICK.scene.SceneLights", "type": "property", "name": "otherLights"}, {"url": "KICK.scene.Transform.html#property_parent", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "parent"}, {"url": "KICK.core.Engine.html#property_paused", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "paused"}, {"url": "KICK.math.mat4.html#method_perspective", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "perspective"}, {"url": "KICK.material.GLSLConstants.html#property_phong_fs.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "phong_fs.glsl"}, {"url": "KICK.material.GLSLConstants.html#property_phong_vs.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "phong_vs.glsl"}, {"url": "KICK.scene.Transform.html#property_position", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "position"}, {"url": "KICK.core.Config.html#property_premultipliedAlpha", "access": "", "host": "KICK.core.Config", "type": "property", "name": "premultipliedAlpha"}, {"url": "KICK.core.DefaultResourceProvider.html#property_protocol", "access": "", "host": "KICK.core.DefaultResourceProvider", "type": "property", "name": "protocol"}, {"url": "KICK.core.ResourceProvider.html#property_protocol", "access": "", "host": "KICK.core.ResourceProvider", "type": "property", "name": "protocol"}, {"url": "KICK.core.Constants.html#property__RADIAN_TO_DEGREE", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "_RADIAN_TO_DEGREE"}, {"url": "KICK.mesh.MeshData.html#method_recalculateNormals", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "recalculateNormals"}, {"url": "KICK.mesh.MeshData.html#method_recalculateTangents", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "recalculateTangents"}, {"url": "KICK.scene.SceneLights.html#method_recomputeDirectionalLight", "access": "", "host": "KICK.scene.SceneLights", "type": "method", "name": "recomputeDirectionalLight"}, {"url": "KICK.core.ResourceManager.html#method_release", "access": "", "host": "KICK.core.ResourceManager", "type": "method", "name": "release"}, {"url": "KICK.scene.GameObject.html#method_removeComponent", "access": "", "host": "KICK.scene.GameObject", "type": "method", "name": "removeComponent"}, {"url": "KICK.scene.Scene.html#method_removeComponent", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "removeComponent"}, {"url": "KICK.scene.Scene.html#method_removeComponentListener", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "removeComponentListener"}, {"url": "KICK.core.Util.html#method_removeElementFromArray", "access": "", "host": "KICK.core.Util", "type": "method", "name": "removeElementFromArray"}, {"url": "KICK.core.Util.html#method_removeElementsFromArray", "access": "", "host": "KICK.core.Util", "type": "method", "name": "removeElementsFromArray"}, {"url": "KICK.core.Engine.html#method_removeFrameListener", "access": "", "host": "KICK.core.Engine", "type": "method", "name": "removeFrameListener"}, {"url": "KICK.mesh.Mesh.html#method_render", "access": "", "host": "KICK.mesh.Mesh", "type": "method", "name": "render"}, {"url": "KICK.renderer.Renderer.html#method_render", "access": "", "host": "KICK.renderer.Renderer", "type": "method", "name": "render"}, {"url": "KICK.scene.Component.html#method_render", "access": "", "host": "KICK.scene.Component", "type": "method", "name": "render"}, {"url": "KICK.scene.MeshRenderer.html#method_render", "access": "", "host": "KICK.scene.MeshRenderer", "type": "method", "name": "render"}, {"url": "KICK.scene.Camera.html#method_renderScene", "access": "", "host": "KICK.scene.Camera", "type": "method", "name": "renderScene"}, {"url": "KICK.scene.Camera.html#property_renderTarget", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "renderTarget"}, {"url": "KICK.core.Engine.html#property_resourceManager", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "resourceManager"}, {"url": "KICK.math.mat4.html#method_rotate", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "rotate"}, {"url": "KICK.math.mat4.html#method_rotateEuler", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "rotateEuler"}, {"url": "KICK.math.mat4.html#method_rotateX", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "rotateX"}, {"url": "KICK.math.mat4.html#method_rotateY", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "rotateY"}, {"url": "KICK.math.mat4.html#method_rotateZ", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "rotateZ"}, {"url": "KICK.scene.Transform.html#property_rotation", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "rotation"}, {"url": "KICK.scene.Transform.html#property_rotationEuler", "access": "", "host": "KICK.scene.Transform", "type": "property", "name": "rotationEuler"}, {"url": "KICK.scene.Scene.html#method_saveScene", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "saveScene"}, {"url": "KICK.math.vec3.html#method_scale", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "scale"}, {"url": "KICK.math.vec4.html#method_scale", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "scale"}, {"url": "KICK.math.mat4.html#method_scale", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "scale"}, {"url": "KICK.core.Util.html#method_scaleImage", "access": "", "host": "KICK.core.Util", "type": "method", "name": "scaleImage"}, {"url": "KICK.scene.GameObject.html#property_scene", "access": "", "host": "KICK.scene.GameObject", "type": "property", "name": "scene"}, {"url": "KICK.scene.Component.html#property_scriptPriority", "access": "", "host": "KICK.scene.Component", "type": "property", "name": "scriptPriority"}, {"url": "KICK.math.vec2.html#method_set", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "set"}, {"url": "KICK.math.vec3.html#method_set", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "set"}, {"url": "KICK.math.vec4.html#method_set", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "set"}, {"url": "KICK.math.mat3.html#method_set", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "set"}, {"url": "KICK.math.mat4.html#method_set", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "set"}, {"url": "KICK.math.quat4.html#method_set", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "set"}, {"url": "KICK.math.quat4.html#method_setEuler", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "setEuler"}, {"url": "KICK.texture.Texture.html#method_setImage", "access": "", "host": "KICK.texture.Texture", "type": "method", "name": "setImage"}, {"url": "KICK.texture.Texture.html#method_setImageData", "access": "", "host": "KICK.texture.Texture", "type": "method", "name": "setImageData"}, {"url": "KICK.texture.Texture.html#method_setTemporaryTexture", "access": "", "host": "KICK.texture.Texture", "type": "method", "name": "setTemporaryTexture"}, {"url": "KICK.math.mat4.html#method_setTRS", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "setTRS"}, {"url": "KICK.math.mat4.html#method_setTRSInverse", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "setTRSInverse"}, {"url": "KICK.scene.Camera.html#method_setupClearFlags", "access": "", "host": "KICK.scene.Camera", "type": "method", "name": "setupClearFlags"}, {"url": "KICK.material.Material.html#property_shader", "access": "", "host": "KICK.material.Material", "type": "property", "name": "shader"}, {"url": "KICK.material.Shader.html#property_shaderProgramId", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "shaderProgramId"}, {"url": "KICK.math.quat4.html#method_slerp", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "slerp"}, {"url": "KICK.math.vec3.html#method_sphericalToCarterian", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "sphericalToCarterian"}, {"url": "KICK.core.Config.html#property_stencil", "access": "", "host": "KICK.core.Config", "type": "property", "name": "stencil"}, {"url": "KICK.math.vec3.html#method_str", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "str"}, {"url": "KICK.math.vec4.html#method_str", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "str"}, {"url": "KICK.math.mat3.html#method_str", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "str"}, {"url": "KICK.math.mat4.html#method_str", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "str"}, {"url": "KICK.math.quat4.html#method_str", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "str"}, {"url": "KICK.math.mat3.html#method_strPretty", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "strPretty"}, {"url": "KICK.math.mat4.html#method_strPretty", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "strPretty"}, {"url": "KICK.math.vec2.html#method_subtract", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "subtract"}, {"url": "KICK.math.vec3.html#method_subtract", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "subtract"}, {"url": "KICK.math.vec4.html#method_subtract", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "subtract"}, {"url": "KICK.mesh.MeshData.html#property_tangent", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "tangent"}, {"url": "KICK.texture.Texture.html#property_textureId", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "textureId"}, {"url": "KICK.texture.Texture.html#property_textureType", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "textureType"}, {"url": "KICK.core.Engine.html#property_time", "access": "", "host": "KICK.core.Engine", "type": "property", "name": "time"}, {"url": "KICK.core.Time.html#property_time", "access": "", "host": "KICK.core.Time", "type": "property", "name": "time"}, {"url": "KICK.math.quat4.html#method_toEuler", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "toEuler"}, {"url": "KICK.math.mat4.html#method_toInverseMat3", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "toInverseMat3"}, {"url": "KICK.material.Shader.html#method_toJSON", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "toJSON"}, {"url": "KICK.material.Material.html#method_toJSON", "access": "", "host": "KICK.material.Material", "type": "method", "name": "toJSON"}, {"url": "KICK.texture.Texture.html#method_toJSON", "access": "", "host": "KICK.texture.Texture", "type": "method", "name": "toJSON"}, {"url": "KICK.math.mat4.html#method_toMat3", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "toMat3"}, {"url": "KICK.math.quat4.html#method_toMat3", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "toMat3"}, {"url": "KICK.math.mat3.html#method_toMat4", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "toMat4"}, {"url": "KICK.math.quat4.html#method_toMat4", "access": "", "host": "KICK.math.quat4", "type": "method", "name": "toMat4"}, {"url": "KICK.math.mat4.html#method_toNormalMat3", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "toNormalMat3"}, {"url": "KICK.scene.Camera.html#property_top", "access": "", "host": "KICK.scene.Camera", "type": "property", "name": "top"}, {"url": "KICK.math.mat4.html#method_toRotationMat", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "toRotationMat"}, {"url": "KICK.mesh.MeshData.html#method_transform", "access": "", "host": "KICK.mesh.MeshData", "type": "method", "name": "transform"}, {"url": "KICK.scene.GameObject.html#property_transform", "access": "", "host": "KICK.scene.GameObject", "type": "property", "name": "transform"}, {"url": "KICK.math.mat4.html#method_translate", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "translate"}, {"url": "KICK.math.mat3.html#method_transpose", "access": "", "host": "KICK.math.mat3", "type": "method", "name": "transpose"}, {"url": "KICK.math.mat4.html#method_transpose", "access": "", "host": "KICK.math.mat4", "type": "method", "name": "transpose"}, {"url": "KICK.scene.Light.html#property_type", "access": "", "host": "KICK.scene.Light", "type": "property", "name": "type"}, {"url": "KICK.core.Util.html#method_typedArrayToArray", "access": "", "host": "KICK.core.Util", "type": "method", "name": "typedArrayToArray"}, {"url": "KICK.core.Constants.html#property_TYPE_POINT", "access": "", "host": "KICK.core.Constants", "type": "property", "name": "TYPE_POINT"}, {"url": "KICK.material.Shader.html#property_uid", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "uid"}, {"url": "KICK.texture.Texture.html#property_uid", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "uid"}, {"url": "KICK.material.Shader.html#property_uniformMap", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "uniformMap"}, {"url": "KICK.material.Material.html#property_uniforms", "access": "", "host": "KICK.material.Material", "type": "property", "name": "uniforms"}, {"url": "KICK.material.GLSLConstants.html#property_unlit_fs.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "unlit_fs.glsl"}, {"url": "KICK.material.GLSLConstants.html#property_unlit_vs.glsl", "access": "", "host": "KICK.material.GLSLConstants", "type": "property", "name": "unlit_vs.glsl"}, {"url": "KICK.scene.Component.html#method_update", "access": "", "host": "KICK.scene.Component", "type": "method", "name": "update"}, {"url": "KICK.scene.Scene.html#method_updateAndRender", "access": "", "host": "KICK.scene.Scene", "type": "method", "name": "updateAndRender"}, {"url": "KICK.material.Shader.html#method_updateShader", "access": "", "host": "KICK.material.Shader", "type": "method", "name": "updateShader"}, {"url": "KICK.mesh.MeshData.html#property_uv1", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "uv1"}, {"url": "KICK.mesh.MeshData.html#property_uv2", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "uv2"}, {"url": "KICK.mesh.Mesh.html#method_verify", "access": "", "host": "KICK.mesh.Mesh", "type": "method", "name": "verify"}, {"url": "KICK.material.Material.html#method_verifyUniforms", "access": "", "host": "KICK.material.Material", "type": "method", "name": "verifyUniforms"}, {"url": "KICK.mesh.MeshData.html#property_vertex", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "vertex"}, {"url": "KICK.mesh.MeshData.html#property_vertexAttrLength", "access": "", "host": "KICK.mesh.MeshData", "type": "property", "name": "vertexAttrLength"}, {"url": "KICK.material.Shader.html#property_vertexShaderSrc", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "vertexShaderSrc"}, {"url": "KICK.math.vec2.html#method_wrapArray", "access": "", "host": "KICK.math.vec2", "type": "method", "name": "wrapArray"}, {"url": "KICK.math.vec3.html#method_wrapArray", "access": "", "host": "KICK.math.vec3", "type": "method", "name": "wrapArray"}, {"url": "KICK.math.vec4.html#method_wrapArray", "access": "", "host": "KICK.math.vec4", "type": "method", "name": "wrapArray"}, {"url": "KICK.texture.Texture.html#property_wrapS", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "wrapS"}, {"url": "KICK.texture.Texture.html#property_wrapT", "access": "", "host": "KICK.texture.Texture", "type": "property", "name": "wrapT"}, {"url": "KICK.material.Shader.html#property_zTest", "access": "", "host": "KICK.material.Shader", "type": "property", "name": "zTest"}];
    SyntaxHighlighter.all();
</script>
</body>
</html>
